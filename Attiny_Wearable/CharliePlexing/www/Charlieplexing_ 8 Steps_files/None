<!DOCTYPE html><html lang="en" class="is-desktop hide-ads "><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# ibles-production: http://ogp.me/ns/fb/ibles-production#"><meta charset="utf-8"><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={xpid:"VgYDU1VQChACVVhRAwUBUFA="};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{s.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(23),s={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(s.console=!0,o.indexOf("dev")!==-1&&(s.dev=!0),o.indexOf("nr_dev")!==-1&&(s.nrDev=!0))}catch(c){}s.nrDev&&i.on("internal-error",function(t){r(t.stack)}),s.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),s.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(s,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,s){try{l?l-=1:o(s||new UncaughtException(t,e,n),!0)}catch(f){try{i("ierr",[f,c.now(),!0])}catch(d){}}return"function"==typeof u&&u.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t,e){var n=e?null:c.now();i("err",[t,n])}var i=t("handle"),a=t(24),s=t("ee"),c=t("loader"),f=t("gos"),u=window.onerror,d=!1,p="nr@seenError",l=0;c.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(h){"stack"in h&&(t(13),t(12),"addEventListener"in window&&t(6),c.xhrWrappable&&t(14),d=!0)}s.on("fn-start",function(t,e,n){d&&(l+=1)}),s.on("fn-err",function(t,e,n){d&&!n[p]&&(f(n,p,function(){return!0}),this.thrown=!0,o(n))}),s.on("fn-end",function(){d&&!this.thrown&&l>0&&(l-=1)}),s.on("internal-error",function(t){i("ierr",[t,c.now(),!0])})},{}],3:[function(t,e,n){t("loader").features.ins=!0},{}],4:[function(t,e,n){function r(){j++,L=y.hash,this[u]=x.now()}function o(){j--,y.hash!==L&&i(0,!0);var t=x.now();this[h]=~~this[h]+t-this[u],this[d]=t}function i(t,e){E.emit("newURL",[""+y,e])}function a(t,e){t.on(e,function(){this[e]=x.now()})}var s="-start",c="-end",f="-body",u="fn"+s,d="fn"+c,p="cb"+s,l="cb"+c,h="jsTime",m="fetch",v="addEventListener",w=window,y=w.location,x=t("loader");if(w[v]&&x.xhrWrappable){var g=t(10),b=t(11),E=t(8),R=t(6),O=t(13),C=t(7),P=t(14),T=t(9),N=t("ee"),S=N.get("tracer");t(16),x.features.spa=!0;var L,j=0;N.on(u,r),N.on(p,r),N.on(d,o),N.on(l,o),N.buffer([u,d,"xhr-done","xhr-resolved"]),R.buffer([u]),O.buffer(["setTimeout"+c,"clearTimeout"+s,u]),P.buffer([u,"new-xhr","send-xhr"+s]),C.buffer([m+s,m+"-done",m+f+s,m+f+c]),E.buffer(["newURL"]),g.buffer([u]),b.buffer(["propagate",p,l,"executor-err","resolve"+s]),S.buffer([u,"no-"+u]),T.buffer(["new-jsonp","cb-start","jsonp-error","jsonp-end"]),a(P,"send-xhr"+s),a(N,"xhr-resolved"),a(N,"xhr-done"),a(C,m+s),a(C,m+"-done"),a(T,"new-jsonp"),a(T,"jsonp-end"),a(T,"cb-start"),E.on("pushState-end",i),E.on("replaceState-end",i),w[v]("hashchange",i,!0),w[v]("load",i,!0),w[v]("popstate",function(){i(0,j>1)},!0)}},{}],5:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(13),s=t(12),c="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",p="resource",l="-start",h="-end",m="fn"+l,v="fn"+h,w="bstTimer",y="pushState",x=t("loader");x.features.stn=!0,t(8);var g=NREUM.o.EV;o.on(m,function(t,e){var n=t[0];n instanceof g&&(this.bstStart=x.now())}),o.on(v,function(t,e){var n=t[0];n instanceof g&&i("bst",[n,e,this.bstStart,x.now()])}),a.on(m,function(t,e,n){this.bstStart=x.now(),this.bstType=n}),a.on(v,function(t,e){i(w,[e,this.bstStart,x.now(),this.bstType])}),s.on(m,function(){this.bstStart=x.now()}),s.on(v,function(t,e){i(w,[e,this.bstStart,x.now(),"requestAnimationFrame"])}),o.on(y+l,function(t){this.time=x.now(),this.startPath=location.pathname+location.hash}),o.on(y+h,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+c]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["c"+c]()},!1):window.performance[f]("webkit"+u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["webkitC"+c]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],6:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){s.inPlace(t,[u,d],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),s=t(26)(a,!0),c=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=c(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?s(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],7:[function(t,e,n){function r(t,e,n){var r=t[e];"function"==typeof r&&(t[e]=function(){var t=r.apply(this,arguments);return o.emit(n+"start",arguments,t),t.then(function(e){return o.emit(n+"end",[null,e],t),e},function(e){throw o.emit(n+"end",[e],t),e})})}var o=t("ee").get("fetch"),i=t(23);e.exports=o;var a=window,s="fetch-",c=s+"body-",f=["arrayBuffer","blob","json","text","formData"],u=a.Request,d=a.Response,p=a.fetch,l="prototype";u&&d&&p&&(i(f,function(t,e){r(u[l],e,c),r(d[l],e,c)}),r(a,"fetch",s),o.on(s+"end",function(t,e){var n=this;if(e){var r=e.headers.get("content-length");null!==r&&(n.rxSize=r),o.emit(s+"done",[null,e],n)}else o.emit(s+"done",[t],n)}))},{}],8:[function(t,e,n){var r=t("ee").get("history"),o=t(26)(r);e.exports=r;var i=window.history&&window.history.constructor&&window.history.constructor.prototype,a=window.history;i&&i.pushState&&i.replaceState&&(a=i),o.inPlace(a,["pushState","replaceState"],"-")},{}],9:[function(t,e,n){function r(t){function e(){c.emit("jsonp-end",[],p),t.removeEventListener("load",e,!1),t.removeEventListener("error",n,!1)}function n(){c.emit("jsonp-error",[],p),c.emit("jsonp-end",[],p),t.removeEventListener("load",e,!1),t.removeEventListener("error",n,!1)}var r=t&&"string"==typeof t.nodeName&&"script"===t.nodeName.toLowerCase();if(r){var o="function"==typeof t.addEventListener;if(o){var a=i(t.src);if(a){var u=s(a),d="function"==typeof u.parent[u.key];if(d){var p={};f.inPlace(u.parent,[u.key],"cb-",p),t.addEventListener("load",e,!1),t.addEventListener("error",n,!1),c.emit("new-jsonp",[t.src],p)}}}}}function o(){return"addEventListener"in window}function i(t){var e=t.match(u);return e?e[1]:null}function a(t,e){var n=t.match(p),r=n[1],o=n[3];return o?a(o,e[r]):e[r]}function s(t){var e=t.match(d);return e&&e.length>=3?{key:e[2],parent:a(e[1],window)}:{key:t,parent:window}}var c=t("ee").get("jsonp"),f=t(26)(c);if(e.exports=c,o()){var u=/[?&](?:callback|cb)=([^&#]+)/,d=/(.*)\.([^.]+)/,p=/^(\w+)(\.|$)(.*)$/,l=["appendChild","insertBefore","replaceChild"];Node&&Node.prototype&&Node.prototype.appendChild?f.inPlace(Node.prototype,l,"dom-"):(f.inPlace(HTMLElement.prototype,l,"dom-"),f.inPlace(HTMLHeadElement.prototype,l,"dom-"),f.inPlace(HTMLBodyElement.prototype,l,"dom-")),c.on("dom-start",function(t){r(t[0])})}},{}],10:[function(t,e,n){var r=t("ee").get("mutation"),o=t(26)(r),i=NREUM.o.MO;e.exports=r,i&&(window.MutationObserver=function(t){return this instanceof i?new i(o(t,"fn-")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype)},{}],11:[function(t,e,n){function r(t){var e=a.context(),n=s(t,"executor-",e),r=new f(n);return a.context(r).getCtx=function(){return e},a.emit("new-promise",[r,e],e),r}function o(t,e){return e}var i=t(26),a=t("ee").get("promise"),s=i(a),c=t(23),f=NREUM.o.PR;e.exports=a,f&&(window.Promise=r,["all","race"].forEach(function(t){var e=f[t];f[t]=function(n){function r(t){return function(){a.emit("propagate",[null,!o],i),o=o||!t}}var o=!1;c(n,function(e,n){Promise.resolve(n).then(r("all"===t),r(!1))});var i=e.apply(f,arguments),s=f.resolve(i);return s}}),["resolve","reject"].forEach(function(t){var e=f[t];f[t]=function(t){var n=e.apply(f,arguments);return t!==n&&a.emit("propagate",[t,!0],n),n}}),f.prototype["catch"]=function(t){return this.then(null,t)},f.prototype=Object.create(f.prototype,{constructor:{value:r}}),c(Object.getOwnPropertyNames(f),function(t,e){try{r[e]=f[e]}catch(n){}}),a.on("executor-start",function(t){t[0]=s(t[0],"resolve-",this),t[1]=s(t[1],"resolve-",this)}),a.on("executor-err",function(t,e,n){t[1](n)}),s.inPlace(f.prototype,["then"],"then-",o),a.on("then-start",function(t,e){this.promise=e,t[0]=s(t[0],"cb-",this),t[1]=s(t[1],"cb-",this)}),a.on("then-end",function(t,e,n){this.nextPromise=n;var r=this.promise;a.emit("propagate",[r,!0],n)}),a.on("cb-end",function(t,e,n){a.emit("propagate",[n,!0],this.nextPromise)}),a.on("propagate",function(t,e,n){this.getCtx&&!e||(this.getCtx=function(){if(t instanceof Promise)var e=a.context(t);return e&&e.getCtx?e.getCtx():this})}),r.toString=function(){return""+f})},{}],12:[function(t,e,n){var r=t("ee").get("raf"),o=t(26)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],13:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration=isNaN(t[1])?0:+t[1],t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(26)(i),s="setTimeout",c="setInterval",f="clearTimeout",u="-start",d="-";e.exports=i,a.inPlace(window,[s,"setImmediate"],s+d),a.inPlace(window,[c],c+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(c+u,r),i.on(s+u,o)},{}],14:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",s)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,y,"fn-",s)}function i(t){x.push(t),h&&(b?b.then(a):v?v(a):(E=-E,R.data=E))}function a(){for(var t=0;t<x.length;t++)r([],x[t]);x.length&&(x=[])}function s(t,e){return e}function c(t,e){for(var n in t)e[n]=t[n];return e}t(6);var f=t("ee"),u=f.get("xhr"),d=t(26)(u),p=NREUM.o,l=p.XHR,h=p.MO,m=p.PR,v=p.SI,w="readystatechange",y=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],x=[];e.exports=u;var g=window.XMLHttpRequest=function(t){var e=new l(t);try{u.emit("new-xhr",[e],e),e.addEventListener(w,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(c(l,g),g.prototype=l.prototype,d.inPlace(g.prototype,["open","send"],"-xhr-",s),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),h){var b=m&&m.resolve();if(!v&&!m){var E=1,R=document.createTextNode(E);new h(a).observe(R,{characterData:!0})}}else f.on("fn-end",function(t){t[0]&&t[0].type===w||a()})},{}],15:[function(t,e,n){function r(){var t=window.NREUM,e=t.info.accountID||null,n=t.info.agentID||null,r=t.info.trustKey||null,i="btoa"in window&&"function"==typeof window.btoa;if(!e||!n||!i)return null;var a={v:[0,1],d:{ty:"Browser",ac:e,ap:n,id:o.generateCatId(),tr:o.generateCatId(),ti:Date.now()}};return r&&e!==r&&(a.d.tk=r),btoa(JSON.stringify(a))}var o=t(21);e.exports={generateTraceHeader:r}},{}],16:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<l;r++)t.removeEventListener(p[r],this.listener,!1);e.aborted||(n.duration=s.now()-this.startTime,this.loadCaptureCalled||4!==t.readyState?null==e.status&&(e.status=0):a(this,t),n.cbTime=this.cbTime,d.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime]))}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return v(r)}function i(t,e){var n=f(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}function a(t,e){t.params.status=e.status;var n=o(e,t.lastSize);if(n&&(t.metrics.rxSize=n),t.sameOrigin){var r=e.getResponseHeader("X-NewRelic-App-Data");r&&(t.params.cat=r.split(", ").pop())}t.loadCaptureCalled=!0}var s=t("loader");if(s.xhrWrappable){var c=t("handle"),f=t(17),u=t(15).generateTraceHeader,d=t("ee"),p=["load","error","abort","timeout"],l=p.length,h=t("id"),m=t(20),v=t(19),w=window.XMLHttpRequest;s.features.xhr=!0,t(14),d.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,e.loadCaptureCalled=!1,t.addEventListener("load",function(n){a(e,t)},!1),m&&(m>34||m<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),d.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),d.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid);var n=!1;if("init"in NREUM&&"distributed_tracing"in NREUM.init&&(n=!!NREUM.init.distributed_tracing.enabled),n&&this.sameOrigin){var r=u();r&&e.setRequestHeader("newrelic",r)}}),d.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=v(r);i&&(n.txSize=i)}this.startTime=s.now(),this.listener=function(t){try{"abort"!==t.type||o.loadCaptureCalled||(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{d.emit("internal-error",[n])}catch(r){}}};for(var a=0;a<l;a++)e.addEventListener(p[a],this.listener,!1)}),d.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),d.on("xhr-load-added",function(t,e){var n=""+h(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),d.on("xhr-load-removed",function(t,e){var n=""+h(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),d.on("addEventListener-end",function(t,e){e instanceof w&&"load"===t[0]&&d.emit("xhr-load-added",[t[1],t[2]],e)}),d.on("removeEventListener-end",function(t,e){e instanceof w&&"load"===t[0]&&d.emit("xhr-load-removed",[t[1],t[2]],e)}),d.on("fn-start",function(t,e,n){e instanceof w&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=s.now()))}),d.on("fn-end",function(t,e){this.xhrCbStart&&d.emit("xhr-cb-time",[s.now()-this.xhrCbStart,this.onload,e],e)})}},{}],17:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],18:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[f.now()].concat(s(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(23),s=t(24),c=t("ee").get("tracer"),f=t("loader"),u=NREUM;"undefined"==typeof window.newrelic&&(newrelic=u);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],p="api-",l=p+"ixn-";a(d,function(t,e){u[e]=o(p+e,!0,"api")}),u.addPageAction=o(p+"addPageAction",!0),u.setCurrentRouteName=o(p+"routeName",!0),e.exports=newrelic,u.interaction=function(){return(new r).get()};var h=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(l+"tracer",[f.now(),t,n],r),function(){if(c.emit((o?"":"no-")+"fn-start",[f.now(),r,o],n),o)try{return e.apply(this,arguments)}catch(t){throw c.emit("fn-err",[arguments,this,t],n),t}finally{c.emit("fn-end",[f.now()],n)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){h[e]=o(l+e)}),newrelic.noticeError=function(t,e){"string"==typeof t&&(t=new Error(t)),i("err",[t,f.now(),!1,e])}},{}],19:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],20:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),e.exports=r},{}],21:[function(t,e,n){function r(){function t(){return e?15&e[n++]:16*Math.random()|0}var e=null,n=0,r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(e=r.getRandomValues(new Uint8Array(31)));for(var o,i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",a="",s=0;s<i.length;s++)o=i[s],"x"===o?a+=t().toString(16):"y"===o?(o=3&t()|8,a+=o.toString(16)):a+=o;return a}function o(){function t(){return e?15&e[n++]:16*Math.random()|0}var e=null,n=0,r=window.crypto||window.msCrypto;r&&r.getRandomValues&&Uint8Array&&(e=r.getRandomValues(new Uint8Array(31)));for(var o=[],i=0;i<16;i++)o.push(t().toString(16));return o.join("")}e.exports={generateUuid:r,generateCatId:o}},{}],22:[function(t,e,n){function r(t,e){if(!o)return!1;if(t!==o)return!1;if(!e)return!0;if(!i)return!1;for(var n=i.split("."),r=e.split("."),a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}var o=null,i=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var s=navigator.userAgent,c=s.match(a);c&&s.indexOf("Chrome")===-1&&s.indexOf("Chromium")===-1&&(o="Safari",i=c[1])}e.exports={agent:o,version:i,match:r}},{}],23:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],24:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],25:[function(t,e,n){e.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],26:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(24),a="nr@original",s=Object.prototype.hasOwnProperty,c=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,s,c;try{a=this,r=i(arguments),s="function"==typeof n?n(r,a):n||{}}catch(f){p([f,"",[r,a,o],s])}u(e+"start",[r,a,o],s);try{return c=t.apply(a,r)}catch(d){throw u(e+"err",[r,a,d],s),d}finally{u(e+"end",[r,a,c],s)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,s,c,f="-"===o.charAt(0);for(c=0;c<e.length;c++)s=e[c],a=t[s],r(a)||(t[s]=n(a,f?s+o:o,i,s))}function u(n,r,o){if(!c||e){var i=c;c=!0;try{t.emit(n,r,o,e)}catch(a){p([a,n,r,o])}c=i}}function d(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){p([r])}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return e}function p(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?c(t,s,i):i()}function n(n,r,o,i){if(!p.aborted||i){t&&t(n,r,o);for(var a=e(o),s=m(n),c=s.length,f=0;f<c;f++)s[f].apply(a,r);var d=u[x[n]];return d&&d.push([g,n,r,a]),a}}function l(t,e){y[t]=m(t).concat(e)}function h(t,e){var n=y[t];if(n)for(var r=0;r<n.length;r++)n[r]===e&&n.splice(r,1)}function m(t){return y[t]||[]}function v(t){return d[t]=d[t]||o(n)}function w(t,e){f(t,function(t,n){e=e||"feature",x[n]=e,e in u||(u[e]=[])})}var y={},x={},g={on:l,addEventListener:l,removeEventListener:h,emit:n,get:v,listeners:m,context:e,buffer:w,abort:a,aborted:!1};return g}function i(){return new r}function a(){(u.api||u.feature)&&(p.aborted=!0,u=p.backlog={})}var s="nr@context",c=t("gos"),f=t(23),u={},d={},p=e.exports=o();p.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!E++){var t=b.info=NREUM.info,e=l.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return u.abort();f(x,function(e,n){t[e]||(t[e]=n)}),c("mark",["onload",a()+b.offset],null,"api");var n=l.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===l.readyState&&i()}function i(){c("mark",["domContent",a()+b.offset],null,"api")}function a(){return R.exists&&performance.now?Math.round(performance.now()):(s=Math.max((new Date).getTime(),s))-b.offset}var s=(new Date).getTime(),c=t("handle"),f=t(23),u=t("ee"),d=t(22),p=window,l=p.document,h="addEventListener",m="attachEvent",v=p.XMLHttpRequest,w=v&&v.prototype;NREUM.o={ST:setTimeout,SI:p.setImmediate,CT:clearTimeout,XHR:v,REQ:p.Request,EV:p.Event,PR:p.Promise,MO:p.MutationObserver};var y=""+location,x={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-spa-1130.min.js"},g=v&&w&&w[h]&&!/CriOS/.test(navigator.userAgent),b=e.exports={offset:s,now:a,origin:y,features:{},xhrWrappable:g,userAgent:d};t(18),l[h]?(l[h]("DOMContentLoaded",i,!1),p[h]("load",r,!1)):(l[m]("onreadystatechange",o),p[m]("onload",r)),c("mark",["firstbyte",s],null,"api");var E=0,R=t(25)},{}]},{},["loader",2,16,5,3,4]);</script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","queueTime":0,"licenseKey":"3a6f258991","agent":"","transactionName":"ZARRbBcCC0tSV0QIC11OdU0LABFRXFofCApAFUFNBhcEWl9RHhcNVhZAAiwNFkxBQVMVBVENVmoKFhFdQRpXBBA=","applicationID":"219344664","errorBeacon":"bam.nr-data.net","applicationTime":1395}</script><title>Controlling 20 Led&#39;s From 5 Arduino Pins Using Charlieplexing: 8 Steps</title><meta property="fb:app_id" content="140028286058792"/><meta property="og:site_name" content="Instructables"/><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Controlling 20 Led&#39;s From 5 Arduino Pins Using Charlieplexing: Today, I&#39;ll show you how to control 20 LED&#39;s from just 5 Arduino pins. I&#39;m working on a project where I need to control 15 LED&#39;s, 3 buttons, 3 seven segment displays and an RGB orb from one Arduino. Now if you work it out, you would see that witho..."/><meta property="og:type" content="article"/><meta property="og:url" content="https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/"/><meta property="og:image" content="https://cdn.instructables.com/FD1/JIUI/GJQEJG32/FD1JIUIGJQEJG32.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;width=2100"/><meta property="og:image:width" content="3648"/><meta property="og:image:height" content="2736"/><meta property="og:title" content="Controlling 20 Led's From 5 Arduino Pins Using Charlieplexing"/><meta property="og:description" content="Controlling 20 Led&#39;s From 5 Arduino Pins Using Charlieplexing: Today, I&#39;ll show you how to control 20 LED&#39;s from just 5 Arduino pins. I&#39;m working on a project where I need to control 15 LED&#39;s, 3 buttons, 3 seven segment displays and an RGB orb from one Arduino. Now if you work it out, you would see that witho..."/><meta property="category" content="circuits"/><meta property="channel" content="arduino"/><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@instructables"><meta name="twitter:title" content="Controlling 20 Led's From 5 Arduino Pins Using Charlieplexing"/><meta name="twitter:image" content="https://cdn.instructables.com/FD1/JIUI/GJQEJG32/FD1JIUIGJQEJG32.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;width=620&amp;height=620&amp;fit=bounds"/><link rel='dns-prefetch' href='//ap.lijit.com'/><link rel='dns-prefetch' href='//js-sec.indexww.com'/><link rel="canonical" href="https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/"/><link rel="shortcut icon" type="image/x-icon" href="/assets/img/siteassets/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="apple-touch-icon" sizes="192x192" href="/assets/img/siteassets/apple-touch-icon-192x192.png"/><link rel="apple-touch-icon" sizes="512x512" href="/assets/img/siteassets/apple-touch-icon-512x512.png"/><link rel='dns-prefetch' href='//cdn.instructables.com'/><link rel='dns-prefetch' href='//securepubads.g.doubleclick.net'/><link rel="stylesheet" href="https://use.typekit.net/gbv8krr.css" /><script type="text/javascript" src="/assets/BUNDLES/head_js.min.js?c=9b9912fcd641860cf38915595ca994c68fd79a32"></script><script>
(function(Ibles){
    Ibles.JST = Ibles.JST || {};
    Ibles.pageContext = {};
    Ibles.isStaging = false;
    Ibles.isEuGdprRegion = false;
    Ibles.isLoggedIn = false;
    Ibles.authyCookie = "authy";
    Ibles.userStorageKey = "ibleuser";
})(window.Ibles = window.Ibles || {});
</script><script>function Deferred(){var o=[],a={resolve:function(n){a.then=function(e){e(n)},a.resolve=function(){throw new Error("Deferred already resolved")};var e,t=0;for(;e=o[t++];)e(n);o=null},then:function(e){o.push(e)}};return a}Ibles.readCookie=function(e,n){return(n=RegExp("(^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?decodeURIComponent(n[2]):null},function(e,n){var t=(0,n.readCookie)(n.authyCookie);n.isLoggedIn=!!t;try{var o=localStorage.getItem(n.userStorageKey);n.user=t&&o&&JSON.parse(o)}catch(e){}}(window,Ibles),function(e){var n=e.user;if(e.isLoggedIn&&n){var t="is-loggedin";n.role&&0<=n.role.indexOf("ADMIN")&&(t+=" is-admin");for(var o=n.occupations,a=0;a<o.length;a++)if(0<=o[a].name.toLowerCase().indexOf("teacher")){t+=" is-teacher";break}document.documentElement.className+=t}}(Ibles),function(i,s,d){var n,t;function e(){o("//tags.tiqcdn.com/utag/autodesk/instructables"+(d.isStaging?"-qa/qa":"/prod")+"/utag.js")}function o(e){var n=s.createElement("script");n.src=e+"?cb=5",n.async=!0;var t=s.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}function a(){var e,n,t,o,a,r;n=s,t="script",o="ga",(e=i).GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,a=n.createElement(t),r=n.getElementsByTagName(t)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",r.parentNode.insertBefore(a,r),d.user?ga("create","UA-306473-1","auto",{userId:d.user.id}):ga("create","UA-306473-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")}function r(){n?n():t=!0}function c(){d.isEuGdprRegion||(d.isLoggedIn||r(),a()),e()}i._adskGdprDataSuccess=function(){d.isEuGdprRegion||!i.adskGdprAdvertising||d.isLoggedIn||r(),i.adskGdprAnalytics&&a(),e()},i._adskGdprNoData=c,i._adskGdprDataTimeout=c,i.setAdsLoader=function(e){t?e():n=e},d.isEuGdprRegion||o("//tags.tiqcdn.com/utag/autodesk/lib-gdpr/"+(d.isStaging?"qa":"prod")+"/utag.50.js")}(window,document,Ibles),function(n,t){var o=[],a=[],r=[];function i(e){e.constructor==Array&&e.length&&r.push.apply(r,e)}function e(e){n.addEventListener?n.addEventListener("load",e,!1):n.attachEvent?n.attachEvent("onload",e):n.onload=e}function s(){var e=t.getElementById("deferred-styles");if(e){var n=t.createElement("div");n.innerHTML=e.textContent,t.body.appendChild(n),e.parentElement.removeChild(e)}}e(s),n.loadJS=function(){var e=arguments,n=e[e.length-1];"function"==typeof n&&(i(e[0]),a.push([n]))},n.loadJsQueue=a,n.sessionReady=function(){var e=arguments,n=e[e.length-1];"function"==typeof n&&(i(e[0]),o.push([n]))},n.sessionReadyQueue=o,n.execJsOnLoad=e,n.loadDeferredStyles=s,n.pageScripts=r}(window,document),function(t){t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.renderAdSlot=function(e){var n=t.adsRenderDepsLoaded;n&&n.then(function(){t.googletag.cmd.push(function(){t.googletag.display(e)})})}}(window);</script><link href="/assets/BUNDLES/global_desktop_bs2_css.min.css?c=9b9912fcd641860cf38915595ca994c68fd79a32" rel="stylesheet" type="text/css"/><link href="/assets/scss/global.css?c=9b9912fcd641860cf38915595ca994c68fd79a32" rel="stylesheet" type="text/css"/><link href="/assets/BUNDLES/ible_desktop_css.min.css?c=9b9912fcd641860cf38915595ca994c68fd79a32" rel="stylesheet" type="text/css"/><script type="application/ld+json">{"description":"Controlling 20 Led's From 5 Arduino Pins Using Charlieplexing: Today, I'll show you how to control 20 LED's from just 5 Arduino pins. I'm working on a project where I\u00a0need to control 15 LED's, 3 buttons, 3 seven segment displays and an RGB\u00a0orb from one Arduino. Now if you work it out, you would see that witho...","image":{"url":"https://cdn.instructables.com/ORIG/FD1/JIUI/GJQEJG32/FD1JIUIGJQEJG32.jpg","width":1024,"@type":"ImageObject","height":768.0},"datePublished":"2011-02-06","contributor":{"@type":"Person","name":"riaancornelius"},"publisher":{"url":"https://www.instructables.com","logo":{"url":"https://www.instructables.com/assets/img/logo-228x60.png","width":228,"@type":"ImageObject","height":60},"@type":"Organization","name":"Instructables"},"name":"Controlling 20 Led's From 5 Arduino Pins Using Charlieplexing","author":{"url":"https://www.instructables.com","logo":{"url":"https://www.instructables.com/assets/img/logo-228x60.png","width":228,"@type":"ImageObject","height":60},"@type":"Organization","name":"Instructables"},"headline":"Controlling 20 Led's From 5 Arduino Pins Using Charlieplexing","@type":"Article","mainEntityOfPage":{"@id":"https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/","@type":"WebPage"},"@context":"https://schema.org","dateModified":"2017-11-06"}</script><script type="application/ld+json">{"@context":"http://schema.org","itemListElement":[{"position":1,"@type":"ListItem","item":{"@id":"https://www.instructables.com/circuits/","@type":"WebPage"},"name":"Circuits"},{"position":2,"@type":"ListItem","item":{"@id":"https://www.instructables.com/circuits/arduino/projects/","@type":"WebPage"},"name":"Arduino"}],"@type":"BreadcrumbList"}</script><script type="application/ld+json">{"description":"Controlling 20 Led's From 5 Arduino Pins Using Charlieplexing: Today, I'll show you how to control 20 LED's from just 5 Arduino pins. I'm working on a project where I\u00a0need to control 15 LED's, 3 buttons, 3 seven segment displays and an RGB\u00a0orb from one Arduino. Now if you work it out, you would see that witho...","image":{"url":"https://cdn.instructables.com/ORIG/FD1/JIUI/GJQEJG32/FD1JIUIGJQEJG32.jpg","width":1024,"@type":"ImageObject","height":768.0},"step":[{"url":"https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/step1/The-parts-list/#step1","text":"20 x LED's - These need to have the same forward voltage and current requirements to work properly. If you use different types, more than one will probably turn on at the same time. In my case I\u00a0used 3mm green and red LED's.\n\n5 Resistors - I\u00a0used ...","image":"","@type":"HowToStep","name":"The Parts List"},{"url":"https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/step2/Charlieplexing-The-theory/#step2","text":"Ok, the principle behind Charlieplexing is fairly simple. If you hook up 2 LED's between 2 micro-controller pins with 1 anode towards pin 1 and one anode towards pin 2, you turn on LED1 by setting pin 1 HIGH and pin 2 LOW. To turn LED2 on you reve...","image":"https://cdn.instructables.com/F1S/0AF4/G1BBCPIH/F1S0AF4G1BBCPIH.LARGE.jpg?auto=webp&&frame=1&fit=bounds","@type":"HowToStep","name":"Charlieplexing - the Theory"},{"url":"https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/step3/The-first-problem-Wiring-it-properly/#step3","text":"I\u00a0don't joke when I\u00a0say this is not as simple as it seems. If you make a mistake, it could be hard to find and correct. When I\u00a0built this circuit, I\u00a0pulled it apart and re-did it 3 times before it worked (mostly). Eventually I\u00a0had to pull out 3 LE...","image":"https://cdn.instructables.com/FQX/A0P7/G1BBHJRE/FQXA0P7G1BBHJRE.LARGE.jpg?auto=webp&&frame=1&fit=bounds","@type":"HowToStep","name":"The First Problem - Wiring It Properly"},{"url":"https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/step4/Testing-what-you-have-so-far/#step4","text":"Do this! If you don't test now before you connect the Arduino, you can't be sure whether the problem is in the software or if the problem is hardware related if (when?) you have issues once you start programming it.\n\nI tested mine and it worked fi...","image":"https://cdn.instructables.com/FXD/4GZ9/GJQED5V6/FXD4GZ9GJQED5V6.LARGE.jpg?auto=webp&&frame=1&width=1024&height=1024&fit=bounds","@type":"HowToStep","name":"Testing What You Have So Far."},{"url":"https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/step5/Preparing-to-code-it/#step5","text":"Now before we actually get to coding it, it would be a good idea to have a bit of a plan before just jumping in.\n\nThe principle is actually quite simple.\n\nWhen the Arduino starts, change all pins connected to the Charlieplex to INPUT.\n\nIn the main...","image":"","@type":"HowToStep","name":"Preparing to Code It."},{"url":"https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/step6/Coding-it-A-simple-test/#step6","text":"The first thing we do is define the pins that the Charlieplex will be on:\n\n#define A 8\n#define B 9\n#define C 10\n#define D 11\n#define E 12\n\nThen we define the actual LED connections. You can see that I define them as they are set up in the simplifi...","image":"https://cdn.instructables.com/FH2/G1XF/GJQE8WGI/FH2G1XFGJQE8WGI.LARGE.jpg?auto=webp&&frame=1&fit=bounds","@type":"HowToStep","name":"Coding It - a Simple Test."},{"url":"https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/step7/Coding-it-A-better-example/#step7","text":"\nWhile cycling through all LED's is a good indication that it works, it's somewhat boring...\n\nThe attached sketch shows how you can set up the code to display specific frames (Where each frame is defined as a bunch of LED's that are on or off).\n\nT...","image":"https://cdn.instructables.com/FJI/V7XZ/GJQEJGB9/FJIV7XZGJQEJGB9.LARGE.jpg?auto=webp&&frame=1&fit=bounds","@type":"HowToStep","name":"Coding It - a Better Example."},{"url":"https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/step8/Final-Thoughts/#step8","text":"While this was actually quite fun to build, it is a lot of complexity for a rather limited solution. In the video on the previous step you can see how the LED's get dimmer the more you have on at any specific time. Couple that to the fact that the...","image":"","@type":"HowToStep","name":"Final Thoughts"}],"@context":"http://schema.org","@type":"HowTo","name":"Controlling 20 Led's From 5 Arduino Pins Using Charlieplexing"}</script><script>
var adsRenderDepsLoaded = new Deferred();
setAdsLoader(function(){
  headJsLoaded(function(){
    head.load([
        "//ap.lijit.com/www/sovrn_beacon_standalone/sovrn_standalone_beacon.js?iid=13390459&uid=instructables",
        "//js-sec.indexww.com/ht/ls-instructables.js",
        "//c.amazon-adsystem.com/aax2/apstag.js",
        "//securepubads.g.doubleclick.net/tag/js/gpt.js"
    ], function() {
        var refreshingSlot,
            slots = [],
            sizes = {
                'gpt-ad-leaderboard': [[728, 90], [970, 250], [970, 90]],
                'gpt-ad-med-rectangle': [[300, 250], [300, 600], [160, 600]],
                'gpt-ad-sidebar-brand': [[300, 250], [300, 600], [160, 600]],
                'gpt-ad-inline-med-1': [[300, 250]],
                'gpt-ad-inline-med-2': [[300, 250]],
                'gpt-ad-infeed-leaderboard': [[728, 90]]
            };

        googletag.cmd.push(function() {
            slots.push(googletag.defineSlot("/1022072/circuits_leaderboard", sizes['gpt-ad-leaderboard'], "gpt-ad-leaderboard").addService(googletag.pubads()));
            slots.push(googletag.defineSlot("/1022072/circuits_med_rectangle", sizes['gpt-ad-med-rectangle'], "gpt-ad-med-rectangle")
                .addService(googletag.pubads()));
            refreshingSlot = googletag.defineSlot("/1022072/brand_circuits_med_rectangle", sizes['gpt-ad-sidebar-brand'], "gpt-ad-sidebar-brand")
                .addService(googletag.pubads());
            slots.push(refreshingSlot);
            slots.push(googletag.defineSlot("/1022072/circuits_inline_med_rectangle", sizes['gpt-ad-inline-med-1'], "gpt-ad-inline-med-1")
                .addService(googletag.pubads()));
            slots.push(googletag.defineSlot("/1022072/rightside_inline_med_rectangle", sizes['gpt-ad-inline-med-2'], "gpt-ad-inline-med-2")
                .addService(googletag.pubads()));
            slots.push(googletag.defineSlot("/1022072/infeed_leaderboard", sizes['gpt-ad-infeed-leaderboard'], 'gpt-ad-infeed-leaderboard')
                .addService(googletag.pubads()));

            googletag.pubads().setTargeting("kvrefd", "instructables.com");
            googletag.pubads().setTargeting("content", "Step by St");
            googletag.pubads().setTargeting("id", "AHG1BBCOGV");
            googletag.pubads().setTargeting("category", "circuits");
            googletag.pubads().setTargeting("channel", "arduino");
            googletag.pubads().setTargeting("author", "MXX2D3OF9N");
            googletag.pubads().setTargeting("featured", "false");
            googletag.pubads().setTargeting("status", "PUBLISHED");
            googletag.pubads().setTargeting("step", "intro");
            googletag.pubads().setTargeting("adtest", "");

            
            
            
                googletag.pubads().setTargeting("keyword", ["charlieple","arduino","led"]);
            

            googletag.pubads().enableSingleRequest();
            googletag.pubads().collapseEmptyDivs();
            googletag.enableServices();
        });

        apstag.init({
            pubID: '3058',
            adServer: 'googletag',
            bidTimeout: 1e3
        });

        apstag.fetchBids({
            slots: [{
                slotID: "gpt-ad-leaderboard",
                slotName: "/1022072/circuits_leaderboard",
                sizes: sizes['gpt-ad-leaderboard']
            },
            {
                slotID: 'gpt-ad-infeed-leaderboard',
                slotName: '/1022072/infeed_leaderboard',
                sizes: sizes['gpt-ad-infeed-leaderboard']
            },
            {
                slotID: "gpt-ad-med-rectangle",
                slotName: "/1022072/circuits_med_rectangle",
                sizes: sizes['gpt-ad-med-rectangle']
            },
            {
                slotID: "gpt-ad-sidebar-brand",
                slotName: "/1022072/brand_circuits_med_rectangle",
                sizes: sizes['gpt-ad-sidebar-brand']
            },
            {
                slotID: "gpt-ad-inline-med-1",
                slotName: "/1022072/circuits_inline_med_rectangle",
                sizes: sizes['gpt-ad-inline-med-1']
            },
            {
                slotID: "gpt-ad-inline-med-2",
                slotName: "/1022072/rightside_inline_med_rectangle",
                sizes: sizes['gpt-ad-inline-med-2']
            }
        ]}, function(bids) {
            googletag.cmd.push(function() {
                apstag.setDisplayBids();
            });
            adsRenderDepsLoaded.resolve();
        });

        setInterval(function(){
            apstag.fetchBids({
                slots: [            {
                    slotID: "gpt-ad-sidebar-brand",
                    slotName: "/1022072/brand_circuits_med_rectangle",
                    sizes: sizes['gpt-ad-sidebar-brand']
                }]
            }, function(bids){
                apstag.setDisplayBids();
                googletag.pubads().refresh([refreshingSlot]);
            });
        }, 30000);

        document.documentElement.className = document.documentElement.className.replace('hide-ads', 'show-ads show-sidebar-ad');
    });
  });
});
</script><link href="/assets/scss/instructable.css?c=9b9912fcd641860cf38915595ca994c68fd79a32" rel="stylesheet" type="text/css"/></head><body class="category-theme-circuits "><header id="site-header" class="site-header nopin site-header-circuits"><div class="site-header-top"><div class="left-col"><nav class="site-header-nav site-header-primary-nav"><ul><li><a class="site-header-nav-home" href="/"><span class="category-icon icon-category-living"</span></a></li><li><a
                            class="category-nav-link active"
                            href="/circuits/">Circuits</a></li><li><a
                            class="category-nav-link "
                            href="/workshop/">Workshop</a></li><li><a
                            class="category-nav-link "
                            href="/craft/">Craft</a></li><li><a
                            class="category-nav-link "
                            href="/cooking/">Cooking</a></li><li><a
                            class="category-nav-link "
                            href="/living/">Living</a></li><li><a
                            class="category-nav-link "
                            href="/outside/">Outside</a></li><li><a
                            class="category-nav-link "
                            href="/teachers/">Teachers</a></li><li><a class="category-nav-link halloween-nav-link " href="/halloween/" title="Halloween">Halloween</a></li></ul></nav></div><div id="you-menu-container" class="right-col"><span class="site-header-nav-feed-link" style="display: none;"><a class="category-nav-link feed-link" href="/feed/">Following</a></span></div></div><div class="site-header-bottom"><div class="left-col"><a class="site-logo site-logo-category" href="/circuits/"><img class="instructables-logo" alt="Instructables" src="/assets/img/instructables-logo-v2.png"/><span class="site-header-category-brand">instructables</span><span class="site-header-category category-circuits">circuits</span></a><a href="/circuits/projects/" class="btn btn-category-header">Projects</a><a href="/circuits/community/" class="btn btn-category-header">Community</a></div><div class="right-col"><nav class="site-header-nav site-header-secondary-nav"><ul><li><a class="site-header-secondary-link" href="/contest/">Contests</a></li><li><a class="site-header-secondary-link" href="/classes/">Classes</a></li><li><a class="site-header-secondary-link" href="/create/">Publish</a></li></ul></nav><form id="header-search-form" class="site-search-form" action="/circuits/howto/" method="get"><input class="input-medium site-search-input" type="text" placeholder="Let's Make..."/><i class="icon-search1"></i></form></div></div></header><div class="aspace-wrap "><div class="aspace container"><div id="aplace"><div id="gpt-ad-leaderboard" class="gpt-ad"><script>
                    renderAdSlot('gpt-ad-leaderboard');
                </script></div></div></div></div><main role="main"><article id="article" class="full-wrapper category-content-circuits"><header class="article-header" data-location="header"><h1 class="header-title">Controlling 20 Led&#39;s From 5 Arduino Pins Using Charlieplexing</h1><div class="sub-header"><span class="header-byline">
            By <a href="/member/riaancornelius/" rel="author">riaancornelius</a>
            
                in <a class="category" href="/circuits/">Circuits</a><a class="channel" href="/circuits/arduino/projects/">Arduino</a></span><span class="header-stats"><p class="svg-views view-count">183,312</p><p class="svg-favorite active favorite-count">170</p><p class="svg-comments active comment-count">29</p></span></div><div class="sub-header clearfix"><span class="header-meta"><span class="posted-date"></span><button class="license-btn" data-url="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="license" src="/assets/img/license/by-nc-sa_small.png"/></button><button class="stats-btn author-action">Stats</button></span><span class="header-actions"><button class="btn btn-default pdf-btn login-required verification-required" data-sourcea="download"><i class="svg-icon svg-pdf"></i>Download</button><button class="btn btn-default favorite-btn"><i class="svg-icon svg-favorite"></i><span class="favorite-txt">Favorite</span></button></span></div></header><div class="article-body"><div class="main-content"><section id="intro" class="step" data-stepid="SNP2EKQG1BBCOGU"><div class="mediaset"></div><noscript><img alt="Picture of Controlling 20 Led&#39;s From 5 Arduino Pins Using Charlieplexing" src="https://cdn.instructables.com/FD1/JIUI/GJQEJG32/FD1JIUIGJQEJG32.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;width=1024&amp;height=1024&amp;fit=bounds" width="3648" height="2736"></noscript><div class="author-promo clearfix"><div class="author-promo-row"><div class="byline"><a class="avatar" rel="author" href="/member/riaancornelius/"><img src="https://cdn.instructables.com/ORIG/FFU/SVHN/GJQE908F/FFUSVHNGJQE908F.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=130"></a><span class="author-name">By <a class="author" rel="author" href="/member/riaancornelius/">riaancornelius</a></span><span class="author-follow"><button class="btn btn-yellow follow-btn">Follow</button></span></div></div><div class="recent-ibles promoted-content clearfix "><span class="promoted-items-label"><a rel="author" class="author" href="/member/riaancornelius/">More by the author:</a></span><div class="promoted-items list-unstyled pull-right"><div data-id="" class="promoted-item-thumbnail thumbnail instructable-thumbnail"><div class="image-wrapper"><a href="/id/Accessing-5-buttons-through-1-Arduino-pin-Revisi/" title="Accessing 5 buttons through 1 Arduino pin - Revisited"><img src="https://cdn.instructables.com/ORIG/FFE/52F7/GJQEFMLB/FFE52F7GJQEFMLB.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=130" alt="Accessing 5 buttons through 1 Arduino pin - Revisited"></a></div></div><div data-id="" class="promoted-item-thumbnail thumbnail instructable-thumbnail"><div class="image-wrapper"><a href="/id/How-to-access-5-buttons-through-1-Arduino-input/" title="How to access 5 buttons through 1 Arduino input"><img src="https://cdn.instructables.com/ORIG/FSR/G4DN/G1BBBYNF/FSRG4DNG1BBBYNF.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=130" alt="How to access 5 buttons through 1 Arduino input"></a></div></div></div></div></div><div class="step-body"><p>Today, I'll show you how to control 20 LED's from just 5 Arduino pins. I'm working on a project where I need to control 15 LED's, 3 buttons, 3 seven segment displays and an RGB orb from one Arduino. Now if you work it out, you would see that without some clever multiplexing, I would need 15 Digital outputs for the LED's, 3 inputs for the buttons, 21 digital outputs for the seven segment displays and 3 PWM outputs for the RGB orb.<br/><br/>
My Arduino doesn't have 40(15+21+3) outputs and 3 inputs, so I either need to drop features (Which doesn't sound like the fun thing to do), buy an Arduino Mega (Where's the fun in that) or I need to find a clever way to make it work. While I'm usually lazy, doing the impossible sounds like a lot more fun (Ok, the improbable then...)<br/><br/>
I've already managed to hook 5 buttons to one analog input and documented that here:<br/><a href="https://www.instructables.com/id/How-to-access-5-buttons-through-1-Arduino-input/">https://www.instructables.com/id/How-to-access-5-buttons-through-1-Arduino-input/</a><br/><br/>
By using Charlieplexing, you can hook up n*(n-1) LED's to n microcontroller pins. I'll go through the theory in the next step, but from this you can see that I can hook up 20 LED's on 5 pins or 12 LED's on 4 pins, which would be a great start for actually making this all work on 1 Arduino.<br/><br/>
If you search Instructables (and Google for that matter), You'll find lots of theoretical explanations of how Charlieplexing work, and you'll even find some examples of Charlieplexed LED's running on Arduino's. The problem is that the code on these examples are generally not explained very well, and are usually very tightly tied to the exact hardware setup that the author used. This makes it an exercise in futility and frustration to try and make it work on your own projects.<br/><br/>
I will show you exactly how this works, how to set it up with as many LED's as you would like in as painless a manner as possible (Although it gets horribly complicated if you go to more than about 30 LED's), how to code it so it works for you, and which problems I had to overcome in the process.<br/><br/></p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf login-required verification-required" data-sourcea="course">Download</button></div></section><section id="teacher-notes" class="project-section project-section-inner teacher-notes-section"><h3 class="project-section-title">Teacher Notes</h3><div class="js-comments"></div><div class="project-section-body"><p>Teachers! Did you use this instructable in your classroom?<br> Add a Teacher Note to share how you incorporated it into your lesson.</p></div><div class="project-section-actions"><button class="btn btn-lg btn-large btn-yellow js-add-note">Add Teacher Note</button></div></section><div id="gpt-ad-infeed-leaderboard" class="gpt-ad leaderboard-sized-ad"><script>
                renderAdSlot('gpt-ad-infeed-leaderboard');
            </script></div><section id="step1" class="step" data-stepid="SRGG1MWG1BBCOVG"><h2 class="step-title">Step 1: The Parts List</h2><div class="step-body"><p>20 x LED's - These need to have the same forward voltage and current requirements to work properly. If you use different types, more than one will probably turn on at the same time. In my case I used 3mm green and red LED's.<br/><br/>
5 Resistors - I used 100 Ohm resistors (Brown Black Brown). The value depends on your resistors, but will probably be somewhere between about 75 and 150 Ohm. If the value is too big, your LED's will be dim. If they are too small, more than one LED will turn on at the same time.<br/><br/>
An Arduino. This is the brains of the project. Well, actually, I'm the brains, but you get the idea... I'm using a Diecimila for this project.<br/><br/>
Some wire to hook it all together (Actually, LOTS of wire).<br/><br/></p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf login-required verification-required" data-sourcea="course">Download</button></div></section><section id="step2" class="step" data-stepid="SLPRKJSG1BBCOYC"><h2 class="step-title">Step 2: Charlieplexing - the Theory</h2><div class="mediaset"></div><noscript><img alt="Picture of Charlieplexing - the Theory" src="https://cdn.instructables.com/F1S/0AF4/G1BBCPIH/F1S0AF4G1BBCPIH.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;fit=bounds" width="148" height="103"><img alt="Picture of Charlieplexing - the Theory" src="https://cdn.instructables.com/F5R/7IA2/G1BB7V3A/F5R7IA2G1BB7V3A.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;fit=bounds" width="227" height="155"><img alt="Picture of Charlieplexing - the Theory" src="https://cdn.instructables.com/FNX/H9C8/G1BBHJJV/FNXH9C8G1BBHJJV.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;fit=bounds" width="368" height="220"><img alt="Picture of Charlieplexing - the Theory" src="https://cdn.instructables.com/FD8/5F8U/G1BB3SWS/FD85F8UG1BB3SWS.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;fit=bounds" width="521" height="264"><img alt="Picture of Charlieplexing - the Theory" src="https://cdn.instructables.com/FXW/3PMG/G1BBCPIW/FXW3PMGG1BBCPIW.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;fit=bounds" width="723" height="312"></noscript><div class="step-body"><p>Ok, the principle behind Charlieplexing is fairly simple. If you hook up 2 LED's between 2 micro-controller pins with 1 anode towards pin 1 and one anode towards pin 2, you turn on LED1 by setting pin 1 HIGH and pin 2 LOW. To turn LED2 on you reverse it - Set pin 1 LOW and pin 2 HIGH. See the first image below.<br/><br/>
This of course means that only one of the LED's can be on at any time. Microcontrollers operate so quickly that you can just alternate their on states very quickly and it will look like both are on all the time.<br/><br/>
Now at this point, you'll probably be saying "Well, so what? I could turn 2 LED's on using 2 pins without all this extra complexity..."<br/><br/>
If you add a third micro-controller pin to the equation it starts getting interesting. Now you can turn on 6 LED's. Basically, you have the same setup as with 2 pins, but you also have the same setup between pin 2 and 3 and between pin 1 and 3. See the second image below.<br/><br/>
To turn on the LED's connected to pin 1 and 3, you need to disconnect pin 2 from the circuit, and then just set pin 1 and 3 HIGH and LOW based on which LED you want to turn on. Luckily, the Arduino allows you to do this. If you change a pin to an input, it basically turns into a big resistance, which is close enough to being disconnected for this to work.<br/><br/>
Now if you look at the third image, you can see what this looks like for 4 pins (12 LED's) and the fourth image shows you what it looks like for 5 pins (20 LED's).<br/><br/>
You'll notice that it becomes rather interesting to wire it up by the time you get to 30 LED's with 6 pins. This for me seems like the limiting factor when building this.<br/><br/>
I generated the images from the following link (I see the link is dead at the moment... I'm not sure if this is temporary):<br/><a href="http://hosting.alexanderbrevig.com/arduino/help/charlieplex">http://hosting.alexanderbrevig.com/arduino/help/charlieplex</a><br/><br/></p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf login-required verification-required" data-sourcea="course">Download</button></div></section><section id="step3" class="step" data-stepid="S7N1VL8G1BBCPJZ"><h2 class="step-title">Step 3: The First Problem - Wiring It Properly</h2><div class="mediaset"></div><noscript><img alt="Picture of The First Problem - Wiring It Properly" src="https://cdn.instructables.com/FQX/A0P7/G1BBHJRE/FQXA0P7G1BBHJRE.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;fit=bounds" width="1001" height="499"><img alt="Picture of The First Problem - Wiring It Properly" src="https://cdn.instructables.com/FXD/NKNP/G1BBCR1F/FXDNKNPG1BBCR1F.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;fit=bounds" width="744" height="436"><img alt="Picture of The First Problem - Wiring It Properly" src="https://cdn.instructables.com/FXD/4GZ9/GJQED5V6/FXD4GZ9GJQED5V6.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;width=1024&amp;height=1024&amp;fit=bounds" width="3648" height="2736"></noscript><div class="step-body"><p>I don't joke when I say this is not as simple as it seems. If you make a mistake, it could be hard to find and correct. When I built this circuit, I pulled it apart and re-did it 3 times before it worked (mostly). Eventually I had to pull out 3 LED's before it worked properly... The diffusion on them are slightly different, so I suspect their current requirements are probably different. Once I pulled these 3 out, everything works fine.<br/><br/>
Also, make sure you test every LED you are going to use before you put it in the circuit. It might seem like a waste of time, but once you start, it could be very hard finding the reason why you sometimes have 4 LED's lighting up at the same time. This was what was happening with me.<br/><br/>
When wiring Charlieplexed LED's, planning is extremely important.  Wire it the easiest way and just reassign the LED numbering in the software if necessary. It makes the initial programming a bit harder, but that's probably easier than trying to wire it in a specific sequence.<br/><br/>
In my case, I wanted the LED's in batches of 3, so I designed it like the first image. I eventually pulled out LED 18, 19 and 20 to make it work. While they were in the circuit, 4 LED's would light up at the same time. I ended up having to buy new LED's to get this working properly.<br/><br/>
The easiest way to wire it up would be as an n x (n-1) matrix, where n is the number of pins you are using. So for my 5 pin example, it would be easier to wire up as a 5 x 4 matrix. The second image shows you the simplified view of this. As you can see, the cathodes of the LED's are connected in batches of (n -1), and the anodes of each 4 LED batch goes to every other pin. I eventually went this route.<br/><br/>
The third image shows my breadboard with the 20 LED's set up.Notice the rats nest of wires... If you screw up, it is probably easier to start from scratch, so make sure that you double check every wire before putting it in. Something else that makes it easier is to use different color hookup wire for each pin. so every connection to pin 1 is blue, pin 2 is green, pin 3 is yellow, etc.<br/><br/><br/><br/><br/><br/></p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf login-required verification-required" data-sourcea="course">Download</button></div></section><section id="step4" class="step" data-stepid="SJCO5WPG1BBCR30"><h2 class="step-title">Step 4: Testing What You Have So Far.</h2><div class="mediaset"></div><noscript><img alt="Picture of Testing What You Have So Far." src="https://cdn.instructables.com/FXD/4GZ9/GJQED5V6/FXD4GZ9GJQED5V6.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;width=1024&amp;height=1024&amp;fit=bounds" width="3648" height="2736"></noscript><div class="step-body"><p>Do this! If you don't test now before you connect the Arduino, you can't be sure whether the problem is in the software or if the problem is hardware related if (when?) you have issues once you start programming it.<br/><br/>
I tested mine and it worked fine, but then I tried using a library I found and some LED's just wouldn't light up. I pulled it apart and rebuilt the circuit again and got the same result. Turns out the problem was with the library (Or the way I was trying to use it - Not that I could see any issue).<br/><br/>
To test it, connect a 5V power supply to your breadboard, and connect the ground wire to the pin 1 connection. Then touch the 5v power to pin 2,3,4,5 in turn. For every wire one (and only one) LED should light up. If 2 LED's light up for every single wire, make your resistors bigger by about 25% and try again. Repeat until only 1 light up at a time. If the LED's are dim, make your resistors smaller by about 25% until they are bright enough.<br/><br/>
If no LED's light up, 2 LED's light up on some pins or more than 2 LED's light up on some pins, you need to check your LED's to make sure that they work and that they are all the same type. If they are, you probably made a mistake with the wiring.<br/><br/>
Once you've connected the 5V power to every pin in turn, move the ground wire to pin 2 and do it again (Touching the 5V wire to pin 1,3,4,5). Do this with the ground wire connected to every pin in turn and make sure that only one LED turn on every time you touch the 5V wire to the other pins.<br/><br/></p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf login-required verification-required" data-sourcea="course">Download</button></div></section><section id="step5" class="step" data-stepid="S037CLVG1BBCRF2"><h2 class="step-title">Step 5: Preparing to Code It.</h2><div class="step-body"><p>Now before we actually get to coding it, it would be a good idea to have a bit of a plan before just jumping in.<br/><br/>
The principle is actually quite simple.<br/><br/>
When the Arduino starts, change all pins connected to the Charlieplex to INPUT.<br/><br/>
In the main loop:<br/>
- Turn off all LED's by setting all pins as INPUTS<br/>
- For each LED you want to turn on, look up its two pins:<br/>
   Set both pins as output.<br/>
   Set the pin connected to the anode HIGH<br/>
   Set the pin connected to the cathode LOW<br/>
   Wait a certain amount of time<br/>
- Turn off all LED's<br/>
- Turn on the next LED<br/>
- Repeat until the program ends<br/><br/>
Let's assume I want to just sequence through all the LED's turning them on one at a time. For each LED, I need to set 5 pins to INPUT, then I need to set 2 pins to OUTPUT, do two digitalWrite() calls and then finally wait for a specified period. We need to do this 20 times.... As you can see, this gets very confusing and complex very quickly. Unless we can create some form of library, this will be another exercise in futility.<br/><br/>
From the library, we would need the following:<br/>
- A list of all LED's in the matrix. Each LED should also specify what pins its anode and cathode is connected to.<br/>
- A function to turn off all LED's<br/>
- A function to turn on all LED's<br/>
- A function that will turn on all LED's defined by some form of mask for a specific period.<br/><br/>
I'll explain the actual code, but I'm not going to explain how to create a library. If you are interested in that, there is a pretty good tutorial on the Arduino site:<br/><a href="http://arduino.cc/en/Hacking/LibraryTutorial">http://arduino.cc/en/Hacking/LibraryTutorial</a><br/><br/>
Before you do a library, you should always get your code working as a normal sketch first in any case, so lets do that.<br/><br/></p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf login-required verification-required" data-sourcea="course">Download</button></div></section><section id="step6" class="step" data-stepid="SMXRDLHG1BBCSRC"><h2 class="step-title">Step 6: Coding It - a Simple Test.</h2><div class="mediaset"></div><noscript><img alt="Picture of Coding It - a Simple Test." src="https://cdn.instructables.com/FH2/G1XF/GJQE8WGI/FH2G1XFGJQE8WGI.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;fit=bounds" width="368" height="364"></noscript><div class="step-body"><p>The first thing we do is define the pins that the Charlieplex will be on:<br/><br/>
#define A 8<br/>
#define B 9<br/>
#define C 10<br/>
#define D 11<br/>
#define E 12<br/><br/>
Then we define the actual LED connections. You can see that I define them as they are set up in the simplified circuit. The first row is every LED with it's cathode connected to pin 1:<br/><br/>
int c[5][4][2] = {<br/>
{ {A, B}, {A, C}, {A, D}, {A, E} },<br/>
{ {B, A}, {B, C}, {B, D}, {B, E} },<br/>
{ {C, A}, {C, B}, {C, D}, {C, E} },<br/>
{ {D, A}, {D, B}, {D, C}, {D, E} },<br/>
{ {E, A}, {E, B}, {E, C}, {E, D} }<br/>
};<br/><br/>
In setup() we just set all the pins to INPUT's.<br/><br/>
The light() method is just a convenient way to set the relevant pins to outputs and set them high and low as required:<br/><br/>
void light( int pins[2] ){<br/>
pinMode( pins[0], OUTPUT );<br/>
digitalWrite( pins[0], HIGH );<br/><br/>
pinMode( pins[1], OUTPUT );<br/>
digitalWrite( pins[1], LOW );<br/>
}<br/><br/>
The test_loop() method just use the test() method to light every LED for half a second:<br/><br/>
And finally, the loop()method just calls the test_loop() method.<br/><br/>
The only tricky thing here is to actually define the LED array properly.<br/></p></div><aside class="downloads"><h4 class="sr-only">Attachments</h4><ul id="attachments" class="ible-files unstyled list-unstyled"><li class="file-info clearfix "><a class="thumb-wrapper" href="https://cdn.instructables.com/ORIG/FDX/APSS/GJQED5WT/FDXAPSSGJQED5WT.tmp" download="Working_test_cycle.pde" title="Working_test_cycle.pde"><span class="file-thumb"><img class="tiny-img lazy-img-scroll" src="/assets/img/pixel.png" data-src="https://www.instructables.com/static/defaultIMG/file.TINY.gif" alt="Working_test_cycle.pde"/></span><span class="title">Working_test_cycle.pde</span></a><div class="file-actions"><a href="https://cdn.instructables.com/ORIG/FDX/APSS/GJQED5WT/FDXAPSSGJQED5WT.tmp" download="Working_test_cycle.pde" class="btn pull-right">Download</a></div></li></ul></aside><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf login-required verification-required" data-sourcea="course">Download</button></div></section><section id="step7" class="step" data-stepid="S8P6YHJGJQEJG5M"><h2 class="step-title">Step 7: Coding It - a Better Example.</h2><div class="mediaset"></div><noscript><img alt="Picture of Coding It - a Better Example." src="https://cdn.instructables.com/FJI/V7XZ/GJQEJGB9/FJIV7XZGJQEJGB9.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;fit=bounds" width="394" height="317"></noscript><div class="step-body"><p><br/>
While cycling through all LED's is a good indication that it works, it's somewhat boring...<br/><br/>
The attached sketch shows how you can set up the code to display specific frames (Where each frame is defined as a bunch of LED's that are on or off).<br/><br/>
The first difference is that I re-arranged the variables in my Array of LED's to resemble the layout on my breadboard. Unfortunately, there's no trick here. It's just trial and error. Watch the sequence of LED's and swop two at a time to try and sort it out.<br/><br/>
The main difference however is the display(int frame[5], int duration) method. Most of it is pretty self-evident. There's a lot of looping to get all the relevant values from the different arrays, but the only part that's likely to be confusing is here:<br/>
if( frame[y] &amp; (0b1000 &gt;&gt; x) ){<br/>
  light( c[y][x] );<br/><br/>
This is essentially using a bitwise AND on a Bitshifted byte to determine whether a column in the frame is on. When you right shift, the 1 in 0B1000 will move right, so what you are doing is this:<br/>
Assume X = 0 and frame[y]=0b0101:<br/>
0b1000 &gt;&gt; 0 is 0B1000<br/>
by doing a bitwise AND on<br/>
0B1000  and<br/>
0B0101<br/>
you end up with 0B0000 which means no LED's will turn on.<br/>
If you then go on to X = 1 and frame[y]=0b0101:<br/>
0b1000 &gt;&gt; 1 is 0B0100<br/>
by doing a bitwise AND on<br/>
0B0100 and<br/>
0B0101<br/>
you end up with 0B0100 which means turn on the second LED (And only the second LED) in row Y.<br/><br/>
Essentially, it's just a clever bit of maths to make the code cleaner. You can read more about bitwise math here:<br/><a href="http://www.arduino.cc/playground/Code/BitMath">http://www.arduino.cc/playground/Code/BitMath</a><br/><br/>
The video shows what it looks like when running.<br/><br/><br/></p></div><aside class="downloads"><h4 class="sr-only">Attachments</h4><ul id="attachments" class="ible-files unstyled list-unstyled"><li class="file-info clearfix "><a class="thumb-wrapper" href="https://cdn.instructables.com/ORIG/F05/0END/GJQEFTX1/F050ENDGJQEFTX1.mov" download="Charlieplexing.mov" title="Charlieplexing.mov"><span class="file-thumb"><img class="tiny-img lazy-img-scroll" src="/assets/img/pixel.png" data-src="https://www.instructables.com/static/defaultIMG/file/MOV.gif" alt="Charlieplexing.mov"/></span><span class="title">Charlieplexing.mov</span></a><div class="file-actions"><a href="https://cdn.instructables.com/ORIG/F05/0END/GJQEFTX1/F050ENDGJQEFTX1.mov" download="Charlieplexing.mov" class="btn pull-right">Download</a></div></li><li class="file-info clearfix "><a class="thumb-wrapper" href="https://cdn.instructables.com/ORIG/FZW/EQQF/GJQEAEMH/FZWEQQFGJQEAEMH.tmp" download="Display_Frames.pde" title="Display_Frames.pde"><span class="file-thumb"><img class="tiny-img lazy-img-scroll" src="/assets/img/pixel.png" data-src="https://www.instructables.com/static/defaultIMG/file.TINY.gif" alt="Display_Frames.pde"/></span><span class="title">Display_Frames.pde</span></a><div class="file-actions"><a href="https://cdn.instructables.com/ORIG/FZW/EQQF/GJQEAEMH/FZWEQQFGJQEAEMH.tmp" download="Display_Frames.pde" class="btn pull-right">Download</a></div></li></ul></aside><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf login-required verification-required" data-sourcea="course">Download</button></div></section><section id="step8" class="step" data-stepid="SMRTDZGGJQEJGCL"><h2 class="step-title">Step 8: Final Thoughts</h2><div class="step-body"><p>While this was actually quite fun to build, it is a lot of complexity for a rather limited solution. In the video on the previous step you can see how the LED's get dimmer the more you have on at any specific time. Couple that to the fact that the wiring is quite complex and the code is pretty convoluted, and it just doesn't strike me as a good way to go.<br/><br/>
Personally, I'm waiting for a couple of 74HC595 shift registers (<a href="http://www.arduino.cc/en/Tutorial/ShiftOut">You can see more info here</a> ). There is also a stable Arduino library for the 595, and after you've added the first, adding more doesn't take any extra pins. This makes it fairly simple to for example control 64 LED's from 3 pins.<br/><br/>
If anything is unclear, feel free to ask and I'll answer and update the Instructable as necessary.<br/><br/>
Thanks for taking the time to read this, It's been a fun little side project for me. Any feedback or ratings (wink, wink) would be much appreciated. Also, Please take the time to vote for me in the Microcontroller contest if you found this helpful.<br/><br/>
This was supposed to be part of a pretty big project, but I just don't think it's worth the effort. Look out for my next Instructables on creating a clock that displays multiple timezones, an RGB Orb, 7 segment displays and interfacing this all with an online app that will update statuses (If at all possible on a single Arduino).<br/></p></div><div class="step-toolbar" data-location="stepBody"><button class="step-tip">Add Tip</button><button class="step-question">Ask Question</button><button class="step-comment">Comment</button><button class="svg-pdf step-download download-pdf login-required verification-required" data-sourcea="course">Download</button></div></section><div class="dual-ads"><div class="dual-ads-inner"><div id="gpt-ad-inline-med-1" class="gpt-ad"><script>
                        renderAdSlot('gpt-ad-inline-med-1');
                    </script></div><div id="gpt-ad-inline-med-2" class="gpt-ad"><script>
                        renderAdSlot('gpt-ad-inline-med-2');
                    </script></div></div></div><div class="contest-entries finalized-contests"><div class="contest-entry"><img alt="Microcontroller Contest" src="None"><p>Participated in the <br><a href="/contest/micro/">Microcontroller Contest</a></p><button class="btn view-btn btn-yellow">View Contest</button></div></div><section id="imadeits" class="imadeits"><h2>
        
            1 Person Made This Project!
        
    </h2><ul class="list-unstyled unstyled imadeit-list js-comments"><li class="imadeit js-comment " data-id="CF16TJPI3VHMU6K"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/FVB/M239/I3VHMU5F/FVBM239I3VHMU5F.LARGE.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=320" src="/assets/img/pixel.png" alt="Hey, this is the bes...-JoMary90"><h3 class="made-by"><a class="user" href="/member/JoMary90/">JoMary90</a> made it!</h3></li></ul><div class="share"><div class="share-inner"><p>Did you make this project? Share it with us!</p><button class="btn btn-yellow made-it-btn js-show-poster">I Made It!</button></div></div></section><section class="recommendations"><h2>Recommendations</h2><ul class="list-unstyled projects"><li><article><a href="/id/How-to-Build-the-ProtoBot-a-100-Open-Source-Super-/"><img alt="How to Build the ProtoBot - a 100% Open Source, Super-Inexpensive, Educational Robot" class="lazy-img-scroll" src="/assets/img/pixel.png" data-src="https://cdn.instructables.com/FCQ/B8IH/JDOUUQXC/FCQB8IHJDOUUQXC.MEDIUM.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1.2:1&amp;width=306"></a><div class="caption"><h3><a href="/id/How-to-Build-the-ProtoBot-a-100-Open-Source-Super-/">How to Build the ProtoBot - a 100% Open Source, Super-Inexpensive, Educational Robot</a></h3><footer><p>by <a href="/member/Jfieldcap/">Jfieldcap</a> in
                        
                            <a href="/circuits/">Circuits</a></p></footer></div></article></li><li><article><a href="/id/Ultimate-Dry-Ice-Machine-Bluetooth-Controlled-Batt/"><img alt="Ultimate Dry Ice Machine - Bluetooth Controlled, Battery Powered and 3D Printed." class="lazy-img-scroll" src="/assets/img/pixel.png" data-src="https://content.instructables.com/FCY/Q36Z/K1HXT6SH/FCYQ36ZK1HXT6SH.RECTANGLE1.jpg"></a><div class="caption"><h3><a href="/id/Ultimate-Dry-Ice-Machine-Bluetooth-Controlled-Batt/">Ultimate Dry Ice Machine - Bluetooth Controlled, Battery Powered and 3D Printed.</a></h3><footer><p>by <a href="/member/DIY%20Machines/">DIY Machines</a> in
                        
                            <a href="/circuits/arduino/projects/">Arduino</a></p></footer></div></article></li><li><article><a href="/id/ILC1-18L-Clock/"><img alt="ILC1-1/8L Clock" class="lazy-img-scroll" src="/assets/img/pixel.png" data-src="https://content.instructables.com/F20/9GAC/K1B4C4EI/F209GACK1B4C4EI.RECTANGLE1.jpg"></a><div class="caption"><h3><a href="/id/ILC1-18L-Clock/">ILC1-1/8L Clock</a></h3><footer><p>by <a href="/member/ChristineNZ/">ChristineNZ</a> in
                        
                            <a href="/circuits/arduino/projects/">Arduino</a></p></footer></div></article></li><li><article><a href="/class/Internet-of-Things-Class/"><img alt="Internet of Things Class" class="lazy-img-scroll" src="/assets/img/pixel.png" data-src="https://cdn.instructables.com/F73/NXEE/J1WW4P6N/F73NXEEJ1WW4P6N.MEDIUM.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1.2:1&amp;width=306"></a><div class="caption"><img alt="Internet of Things Class" class="lazy-img-scroll" src="/assets/img/pixel.png" data-src="https://cdn.instructables.com/FWJ/JWNI/J1MEQIFI/FWJJWNIJ1MEQIFI.MEDIUM.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=130"><h3><a href="/id/Internet-of-Things-Class/">Internet of Things Class</a></h3><footer><p>22,685 Enrolled</p></footer></div></article></li></ul><ul class="list-unstyled contests"><li><h3 class="sr-only">Made with Math Contest</h3><a href="/contest/MadeWithMath19/"><img class="lazy-img-scroll" src="/assets/img/pixel.png" data-src="https://content.instructables.com/F4E/677U/K1B4CZXX/F4E677UK1B4CZXX.MEDIUM.jpg" alt="Made with Math Contest"></a></li><li><h3 class="sr-only">Multi-Discipline Contest</h3><a href="/contest/multi2019/"><img class="lazy-img-scroll" src="/assets/img/pixel.png" data-src="https://content.instructables.com/FW5/12F8/K1B3F7UO/FW512F8K1B3F7UO.MEDIUM.jpg" alt="Multi-Discipline Contest"></a></li><li><h3 class="sr-only">Robotics Contest</h3><a href="/contest/robotics2019/"><img class="lazy-img-scroll" src="/assets/img/pixel.png" data-src="https://content.instructables.com/F21/B1YC/K1B3F7QR/F21B1YCK1B3F7QR.MEDIUM.jpg" alt="Robotics Contest"></a></li></ul></section><div id="discuss" class="comment-type-selector"></div><section id="comments" class="discussion "><h2>29 Discussions</h2><div class="posts js-comments"><article class="post js-comment  " data-id="CS86FG5I3PK280Q" data-stepid="SLPRKJSG1BBCOYC" data-authorid="MM3J30JI3H4QWZP" ><div class="post-header"><div class="meta"><div class="votes js-vote-count ">1</div><div class="avatar"><a href="/member/djgenius10/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/FQY/FVP4/I3H4QYGW/FQYFVP4I3H4QYGW.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/djgenius10/">djgenius10</a><p class="posted-date">
                    
                    
                    4 years ago
                    on <a class="step-link" href="#step2">Step 2</a></p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Hey.</p><p>Here is a working pin of a very useful, quick an easy way to see the wiring needed for n amount of pins:<br/><a href="http://www.modelci.net/charlieplex/index.php?pin=5" rel="nofollow">http://www.modelci.net/charlieplex/index.php?pin=5</a></p><p>You could probably replace the dead link you have with this one.</p></div><div class="js-edit-container"></div><a class="hidden-replies-link js-show-replies" data-num-hidden="2" role="button">
            2
            
                replies
            
            <i class="icon-arrow-down"></i></a></article><article class="post js-comment reply hide" data-id="C4LSK4KJVWNUWL6"  data-authorid="MBE1J50JVWNUVAC" data-inreplyto="CS86FG5I3PK280Q"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/nathanielliddy/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/F3Q/HNRU/JVWNUVEH/F3QHNRUJVWNUVEH.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/nathanielliddy/">nathanielliddy</a><i class="icon-arrow-right"></i><a class="replied-to js-reply-parent" href="/member/djgenius10/">djgenius10</a><p class="posted-date">
                    
                        Reply
                    
                    4 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>This is incredible, but.....is there any way to modify this for rgb leds? I'm beginning to understand charlieplexing finally but now I am trying to make a rgb cube using it. This has opened up a much harder problem. I know that I need 16 ports to control 64 rgb leds. I just don't know why this is the case, and I don't understand how to create a wiring diagram.</p></div><div class="js-edit-container"></div></article><article class="post js-comment reply hide" data-id="CGRYNBKI3PK283A" data-stepid="SLPRKJSG1BBCOYC" data-authorid="MM3J30JI3H4QWZP" data-inreplyto="CS86FG5I3PK280Q"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/djgenius10/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/FQY/FVP4/I3H4QYGW/FQYFVP4I3H4QYGW.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/djgenius10/">djgenius10</a><i class="icon-arrow-right"></i><a class="replied-to js-reply-parent" href="/member/djgenius10/">djgenius10</a><p class="posted-date">
                    
                        Reply
                    
                    4 years ago
                    on <a class="step-link" href="#step2">Step 2</a></p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>I meant to write "link"... Too much of charlieplexing for me today, head is wrecked :)</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="C2K0XWGJUMXRK52"  data-authorid="M55PDMWJUMXRJUP" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/ShirAms/"><img class="lazy-img-scroll" data-src="/assets/img/default/user.TINY.png" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/ShirAms/">ShirAms</a><p class="posted-date">
                    
                    
                    5 months ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Hay<br/>I tried to create a traffic junction.<br/> After I programmed it, and placed the pins, I wasn't shore how to connect them to 5V and GND pins.<br/>Can I sand you the program Iv done? I cant find what went wrong...<br/>and photo of the circle? I think I missed something...</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CUZSSIMIOZ57KJJ"  data-authorid="MJGQPZPIICCYMFR" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/Adhiraj+S/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/F5G/B2GI/IICCYMFU/F5GB2GIIICCYMFU.png?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/Adhiraj+S/">Adhiraj S</a><p class="posted-date">
                    
                    
                    3 years ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Does this mean that u can control all of the leds independently or do they have to controlled in sequence ? Because i wanted to control 15 different leds  independently and also have 2 or more non sequential leds glow at the same time  </p></div><div class="js-edit-container"></div><a class="hidden-replies-link js-show-replies" data-num-hidden="1" role="button">
            1
            
                reply
            
            <i class="icon-arrow-down"></i></a></article><article class="post js-comment reply hide" data-id="CU3IX7JJ6CG934I"  data-authorid="MS0YXANIP8GVQR4" data-inreplyto="CUZSSIMIOZ57KJJ"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/myless8/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/F79/GTLV/IP8GVQR6/F79GTLVIP8GVQR6.png?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/myless8/">myless8</a><i class="icon-arrow-right"></i><a class="replied-to js-reply-parent" href="/member/Adhiraj+S/">Adhiraj S</a><p class="posted-date">
                    
                        Reply
                    
                    2 years ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>It all ends up in the programming. I recently wrote a program that lights up a set of LEDs at random for a second or so before a new set is determined.</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CXXEQKKITKIW386"  data-authorid="M5V84TJITKIW2VV" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/engrmbasit./"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/F0O/HCSK/ITKIW2VX/F0OHCSKITKIW2VX.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/engrmbasit./">engrmbasit.</a><p class="posted-date">
                    
                    
                    3 years ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>can I control 100 led blub with ardino</p></div><div class="js-edit-container"></div><a class="hidden-replies-link js-show-replies" data-num-hidden="1" role="button">
            1
            
                reply
            
            <i class="icon-arrow-down"></i></a></article><article class="post js-comment reply hide" data-id="CIHZ4NMJ6CG930M"  data-authorid="MS0YXANIP8GVQR4" data-inreplyto="CXXEQKKITKIW386"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/myless8/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/F79/GTLV/IP8GVQR6/F79GTLVIP8GVQR6.png?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/myless8/">myless8</a><i class="icon-arrow-right"></i><a class="replied-to js-reply-parent" href="/member/engrmbasit./">engrmbasit.</a><p class="posted-date">
                    
                        Reply
                    
                    2 years ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Arduino Uno has digital 14 IO pins. This means that you can control 14 * 13 = 182 LEDs. Though, you have to worry about the pwm effect after a point. It starts to take too long to cycle through all the LEDs and the effect is that the LEDs look dimmed.</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="C3E5RUAIZ6C9KYC"  data-authorid="MGS3C67IBFSGIX5" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/Roshan+Sadath/"><img class="lazy-img-scroll" data-src="/assets/img/default/user.TINY.png" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/Roshan+Sadath/">Roshan Sadath</a><p class="posted-date">
                    
                    
                    2 years ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Hello Sir,<br/>Could You Please help me with this.<br/>In a circuit containing 2 LEDs how do i wire them up so that i can control them individually.<br/>I want to apply this concept in making an LED Cube so that i can program it myself instead of looking up on Google.<br/><br/>Thank You</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CHX54S9IST7HMVI"  data-authorid="MVHQR0HIPY0O7EB" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/GabrielK32/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/FMB/BN83/JFX0BYCV/FMBBN83JFX0BYCV.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/GabrielK32/">GabrielK32</a><p class="posted-date">
                    
                    
                    3 years ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>I use a TLC5940 to drive 5 RGB leds. (or 16 classical leds).<br/>I can set the power between 0-4095 and I just need a resistance.</p><p>You can easily cascade them to drive 5,10,15,20 rgb leds.</p><p><a href="http://playground.arduino.cc/Learning/TLC5940" rel="nofollow">http://playground.arduino.cc/Learning/TLC5940<br/></a></p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CHEYWHIIMI0U7WD"  data-authorid="MQX6ICYHR3EOTGY" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/m6255/"><img class="lazy-img-scroll" data-src="/assets/img/default/user.TINY.png" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/m6255/">m6255</a><p class="posted-date">
                    
                    
                    3 years ago
                    
                </p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>When you say switches. Ive been looking for months now to have a system that will control (turn off and on or flash 3 to5 different sets of LEDS In otherwords. One Piezo trigger and One set of 12v lights flash when struck. Anybody got anything? </p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CDD0I86I88LJULL" data-stepid="SNP2EKQG1BBCOGU" data-authorid="MJJLFLHH2WEXTD1" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/tpandava/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/FWW/WFVW/I5TI274W/FWWWFVWI5TI274W.png?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/tpandava/">tpandava</a><p class="posted-date">
                    
                    
                    4 years ago
                    on <a class="step-link" href="#intro">Introduction</a></p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>good one i also got the same idea for making a water fountain which consisted of 2000+leds which have different styles to glow using one arduino. so i used nearly 6 pwm pins to vary value to give a fading effect and rest of the pins as blink </p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CTXNZ1II3PK392F" data-stepid="S8P6YHJGJQEJG5M" data-authorid="MM3J30JI3H4QWZP" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/djgenius10/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/FQY/FVP4/I3H4QYGW/FQYFVP4I3H4QYGW.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/djgenius10/">djgenius10</a><p class="posted-date">
                    
                    
                    4 years ago
                    on <a class="step-link" href="#step7">Step 7</a></p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Hey.</p><p>I have managed to adapt your code to run my 15 LEDs in charlieplexing.<br/>I don't know why you grouped your LEDs in 5 arrays of 4, but I had to un-group it in order to run 15 LEDs in one row. I am impressed by that bit math, I have never had that kind of "math" nor in C++ or Java programming that I did in universities, so I appreciate you sharing your code. I've learned a lot and manage finish my little project.</p><p>Thank you.</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CMQLAAVI3BHC4BV" data-stepid="S7N1VL8G1BBCPJZ" data-authorid="MA3R82II3BHC3TD" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/SteveK4/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/FOH/LA1Q/I3BHC3TE/FOHLA1QI3BHC3TE.png?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/SteveK4/">SteveK4</a><p class="posted-date">
                    
                    
                    4 years ago
                    on <a class="step-link" href="#step3">Step 3</a></p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>I had this same issue with multiple LEDs lighting when I thought only one should. For me the problem was that I was writing a new data value before setting the correct port direction. That short bit of time was enough to light some LEDs. Not saying that was your issue but it sounds like what I was seeing.</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="C3ONATGHR16ZXUK" data-stepid="S037CLVG1BBCRF2" data-authorid="ME3R4OLFTRJ73HQ" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/AlexLPD/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/F6L/5W9Q/G79F1L83/F6L5W9QG79F1L83.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/AlexLPD/">AlexLPD</a><p class="posted-date">
                    
                    
                    5 years ago
                    on <a class="step-link" href="#step5">Step 5</a></p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Hey hey... this is a nice trick!!! thanks for sharing it !!!! ... know leds do something awesome! =)</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CN0BP1OHPT923O1" data-stepid="SNP2EKQG1BBCOGU" data-authorid="MMYWZACFHEJ16YJ" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/baneofserenity/"><img class="lazy-img-scroll" data-src="None" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/baneofserenity/">baneofserenity</a><p class="posted-date">
                    
                    
                    5 years ago
                    on <a class="step-link" href="#intro">Introduction</a></p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>This is pretty cool, i successfully hooked it up using a simple two pin and then a three pin. I'd say i can confidently handle this on a larger scale now. You are right though this does take up a lot of space, but at least it uses less pins. Thanks!</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="C33SO7NHE07PPYC" data-stepid="SNP2EKQG1BBCOGU" data-authorid="M8C8SWXFWYHW76N" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/bertus52x11/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/FH2/NTV6/G50TWFLF/FH2NTV6G50TWFLF.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/bertus52x11/">bertus52x11</a><p class="posted-date">
                    
                    
                    6 years ago
                    on <a class="step-link" href="#intro">Introduction</a></p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>Great and clear I'ble! Thanks for sharing. <br/><br/>Could I use Charlieplexing as you described it, with "AnalogWrite" (instead of DigitalWrite).? I would like to change the intensity of a large numer of LED's and Arduino has a limited amount of pins to do this (pins 3, 5, 6, 9, 10 , 11).</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="C23R25SHCV99F3I" data-stepid="SNP2EKQG1BBCOGU" data-authorid="MSRIFXUGPBD4AKF" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/sonicase/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/F1Z/FDAU/H0OIUXXV/F1ZFDAUH0OIUXXV.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/sonicase/">sonicase</a><p class="posted-date">
                    
                    
                    6 years ago
                    on <a class="step-link" href="#intro">Introduction</a></p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>this helped some, thanks</p></div><div class="js-edit-container"></div></article><article class="post js-comment  " data-id="CVPPNK8GKQ3DCQF" data-stepid="S8P6YHJGJQEJG5M" data-authorid="MCO6FPKFQR1O0SH" ><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/ardor/"><img class="lazy-img-scroll" data-src="/assets/img/default/user.TINY.png" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author " href="/member/ardor/">ardor</a><p class="posted-date">
                    
                    
                    8 years ago
                    on <a class="step-link" href="#step7">Step 7</a></p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>I'm struggling to understand your code. Would you mind going through Display_Frames.pde and commenting so that we could figure out what each section a little easier?<br/><br/>I'm new to coding and it would REALLY help.<br/><br/>Please :-}</p></div><div class="js-edit-container"></div><a class="hidden-replies-link js-show-replies" data-num-hidden="1" role="button">
            1
            
                reply
            
            <i class="icon-arrow-down"></i></a></article><article class="post js-comment reply hide" data-id="CYC4WAXGKS0STNF" data-stepid="S8P6YHJGJQEJG5M" data-authorid="MXX2D3OF9N26Q4S" data-inreplyto="CVPPNK8GKQ3DCQF"><div class="post-header"><div class="meta"><div class="votes js-vote-count hide">0</div><div class="avatar"><a href="/member/riaancornelius/"><img class="lazy-img-scroll" data-src="https://cdn.instructables.com/ORIG/FFU/SVHN/GJQE908F/FFUSVHNGJQE908F.jpg?auto=webp&amp;&amp;frame=1&amp;crop=1:1&amp;width=48" src="/assets/img/pixel.png" alt="None"></a></div><div class="posted-by"><a class="author owner" href="/member/riaancornelius/">riaancornelius</a><i class="icon-arrow-right"></i><a class="replied-to js-reply-parent" href="/member/ardor/">ardor</a><p class="posted-date">
                    
                        Reply
                    
                    8 years ago
                    on <a class="step-link" href="#step7">Step 7</a></p></div></div><div class="toolbar js-toolbar"><button class="btn reply-btn js-reply">Reply</button><button class="btn btn-default vote-btn js-vote-btn">Upvote</button></div></div><div class="text js-text"><p>I'm a bit swamped at the moment, but I'll try to help you out with this on the weekend.</p></div><div class="js-edit-container"></div></article></div><button class="btn js-more-comments">More Comments</button><button class="btn btn-yellow comment-btn js-show-poster">Post Comment</button></section></div><div class="sidebar"><div class="ad-block-wrapper"><div class="ad-block"><div id="gpt-ad-med-rectangle" class="gpt-ad"><script>
                renderAdSlot('gpt-ad-med-rectangle');
            </script></div></div></div><div id="ible-stickyad-wrapper" class="ad-block-wrapper"><div id="ible-stickyad"><div id="gpt-ad-sidebar-brand" class="gpt-ad"><script>
                renderAdSlot('gpt-ad-sidebar-brand');
            </script></div></div></div></div></div></article><div id="admin-container"></div></main><footer id="footer" class="footer footer-desktop footer-circuits"><div class="footer-row footer-row-top"><div class="footer-robot robot-icon robot-icon-circuits"></div><div class="footer-categories"><h3>Categories</h3><ul class="footer-categories-links"><li class="circuits active"><a href="/circuits/" title="Circuits"><div class="category-icon icon-category-circuits"></div>Circuits
                            </a></li><li class="workshop "><a href="/workshop/" title="Workshop"><div class="category-icon icon-category-workshop"></div>Workshop
                            </a></li><li class="craft "><a href="/craft/" title="Craft"><div class="category-icon icon-category-craft"></div>Craft
                            </a></li><li class="cooking "><a href="/cooking/" title="Cooking"><div class="category-icon icon-category-cooking"></div>Cooking
                            </a></li><li class="living "><a href="/living/" title="Living"><div class="category-icon icon-category-living"></div>Living
                            </a></li><li class="outside "><a href="/outside/" title="Outside"><div class="category-icon icon-category-outside"></div>Outside
                            </a></li><li class="teachers "><a href="/teachers/" title="Teachers"><div class="category-icon icon-category-teachers"></div>Teachers
                            </a></li></ul></div><div class="footer-about-us"><h3>About Us</h3><ul><li><a href="/about/" title="About Us">Who We Are</a></li><li><a href="/create/" title="Why Publish">Why Publish?</a></li><li><a href="/community/Positions-available-at-Instructables/" title="Jobs">Jobs</a></li></ul></div><div class="footer-resources"><h3>Resources</h3><ul><li><a href="/sitemap/" title="Sitemap">Sitemap</a></li><li><a href="/id/how-to-write-a-great-instructable/" title="Help">Help</a></li><li><a href="/contact/" title="Contact">Contact</a></li></ul></div><div class="footer-find-us"><h3>Find Us</h3><ul><li><a class="instagram" href="https://www.instagram.com/instructables/" title="Instagram"><img alt="instagram" src="/assets/img/social/icon-share-instagram.svg"/></a></li><li><a class="pinterest" href="https://www.pinterest.com/instructables" title="Pinterest"><img alt="pinterest" src="/assets/img/social/icon-share-pinterest.svg"/></a></li><li><a class="facebook" href="https://www.facebook.com/instructables" title="Facebook"><img alt="facebook" src="/assets/img/social/icon-share-facebook.svg"/></a></li><li><a class="twitter" href="https://www.twitter.com/instructables" title="Twitter"><img alt="twitter" src="/assets/img/social/icon-share-twitter.svg"/></a></li></ul></div></div><div class="footer-rule"><hr/></div><div class="footer-row footer-row-bottom"><div class="footer-links"><p>© 2019 Autodesk, Inc.</p><ul class="footer-links-list"><li><a href="http://usa.autodesk.com/adsk/servlet/item?siteID=123112&amp;id=21959721" target="_blank" title="Terms of Service">Terms of Service</a><span class="divider">|</span></li><li><a href="http://usa.autodesk.com/adsk/servlet/item?siteID=123112&amp;id=21292079" target="_blank" title="Privacy Statement">Privacy Statement</a><span class="divider">|</span></li><li><a data-opt-in-preferences="">Privacy settings</a><span class="divider">|</span></li><li><a href="http://usa.autodesk.com/legal-notices-trademarks/" target="_blank">Legal Notices &amp; Trademarks</a></li></ul><a href="http://www.autodesk.com" class="adsk-logo" target="blank" title="Autodesk"><img alt="autodesk" src="/assets/img/footer/autodesk-logo-make-anything.png"/></a></div></div></footer><script id="js-page-context" type="application/json">{"category":"circuits","recaptchaSiteKey":"6Le9TAwTAAAAADEB44pkYQS2fm7hroFthrNqnoAb","serverCookie":"APPSERVER","sourceCookie":"iblesource","userStorageKey":"ibleuser","staticRoot":"/assets/","sessionCookie":"JSESSIONID","nativeApp":false,"ibleData":{"category":"circuits","commentingEnabled":true,"pgFlag":false,"classifications":[{"channels":[{"category":"circuits","type":"channel","name":"arduino","title":"Arduino"}],"type":"category","name":"circuits","title":"Circuits"}],"author":{"originalUrl":"https://cdn.instructables.com/ORIG/FFU/SVHN/GJQE908F/FFUSVHNGJQE908F.jpg","id":"MXX2D3OF9N26Q4S","screenName":"riaancornelius"},"shareImageUrl":"https://cdn.instructables.com/FD1/JIUI/GJQEJG32/FD1JIUIGJQEJG32.LARGE.jpg?auto=webp&&frame=1&width=2100","title":"Controlling 20 Led's From 5 Arduino Pins Using Charlieplexing","grade":"","coverImage":{"originalUrl":"https://cdn.instructables.com/FD1/JIUI/GJQEJG32/FD1JIUIGJQEJG32.LARGE.jpg"},"featureFlag":false,"indexTags":["internal"],"urlString":"Controlling-20-Leds-from-5-Arduino-pins-using-Cha","fullUrl":"https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/","publishDate":"2011-02-06 12:00:07.0","type":"Step by Step","id":"EVJ4TAHG1BBCOGV","channel":"arduino","subject":""},"cacheUrls":["https://www.instructables.com/id/Controlling-20-Leds-from-5-Arduino-pins-using-Cha/","https://fastly-backend.prod.instructables.tech/json-api/showInstructableModel?versionId=&r=&anyStatus=false&id=Controlling-20-Leds-from-5-Arduino-pins-using-Cha","https://fastly-backend.prod.instructables.tech/json-api/searchComments?instructableId=EVJ4TAHG1BBCOGV&IMadeIt=true","https://fastly-backend.prod.instructables.tech/json-api/getComments?commentId=&instructableId=EVJ4TAHG1BBCOGV&limit=20&IMadeIt=false","https://fastly-backend.prod.instructables.tech/json-api/searchInstructables?sort=&featuredHomePage=true&limit=20&offset=0&additionalParams=-indexTags%3AdesignOnly%2C+&type=id&categories=circuits","https://fastly-backend.prod.instructables.tech/json-api/searchInstructables?sort=&isCourse=true&limit=20&offset=0&additionalParams=%2B%28indexTags%3AfeaturedCircuits+OR+indexTags%3AfeaturedArduino%29&type=guide","https://fastly-backend.prod.instructables.tech/json-api/getContests?status=published&sort=added&limit=50&offset=0"],"screenNameCookie":"ibleScreenName","remoteRoot":"https://www.instructables.com/","featureFlags":{"halloween":true,"project_supplies":true,"disable_upvotes":true,"makey_landing_page":true},"currentLocale":"en_US","disableEmailVerifyWidget":false,"channel":"arduino","mobile":false,"remoteHost":"https://www.instructables.com","oauthGetAuthUrl":"https://www.instructables.com/oauth/getAuthUrl/","facebookAppId":"140028286058792","commitInfo":{"commit_message":"Merge pull request #3326 from Instructables/IN-2291_mummbot_redirectfix typo","git_hash":"9b9912fcd641860cf38915595ca994c68fd79a32"},"gtmContainerID":"GTM-PLDK3K","oauthCallbackUrl":"https://www.instructables.com/oauth/callback/","cookieSyncDomains":["https://www.instructables.com"],"authyCookie":"authy"}</script><script>
    headJsLoaded(function(head){
        head.test({
            test: Ibles.isLoggedIn,
            success: ["/assets/BUNDLES/ible_desktop_logged_in_js.min.js?c=9b9912fcd641860cf38915595ca994c68fd79a32"],
            failure: ["/assets/BUNDLES/ible_desktop_logged_out_js.min.js?c=9b9912fcd641860cf38915595ca994c68fd79a32"],
            callback: function() {
                
                var model = new Ibles.models.InstructableModel(_.extend({
                    disableComments: false,
                    allSteps: true,
                    fetchUserData: true,
                    fetchStats: true
                }, Ibles.pageContext.ibleData));

                var view = new Ibles.views.DesktopInstructableView({
                    el: "#article",
                    model: model
                });
                
            }
        });
    });
    </script></body></html>