var isInLayout=!1,url=window.location.href,objectName=getParameterValue(url,"objectName"),parentAccess=!1,isExternalWg=!1,isExtAsInline=!1,isStandardInline=!1,jvxWidgetNode=null;try{if(jvxWidgetNode=document.getElementById("jvxWidget"),!(isInLayout=!(!jvxWidgetNode||!jvxWidgetNode.getAttribute("data-is-in-layout")))){var assetID=window.frameElement.id;parentAccess=!0}}catch(e){}if(!isInLayout)if(parentAccess)(isExtAsInline=jvx_validate(window.frameElement.getAttribute("extFilePath")))||(isStandardInline=!0);else{isExternalWg=!(isInLayout=!1);var adUnitType=getParameterValue(url,"adUnitType"),isCampaign=Number(getParameterValue(url,"isCampaign")),campaignId=getParameterValue(url,"campaignId"),externalStartEventId=getParameterValue(url,"externalStartEventId"),adId=getParameterValue(url,"adId"),creativeUnitType=getParameterValue(url,"creativeUnitType"),placementId=getParameterValue(url,"placementId"),siteId=getParameterValue(url,"siteId"),eventReportingURL=getParameterValue(url,"reportingURL"),isMobile=getParameterValue(url,"isMobile"),clickTagURL=(assetID=getParameterValue(url,"assetID"),getParameterValue(url,"clickTag")),serverURL=getParameterValue(url,"serverURL"),dynamicData="",DYReportingKey="",DYselectedGroup="",DYselectedRule="",resolveDynDataURL="",maxDynAPICall="",maxDynAPICallCnt=0,dyn__serviceList="",isDynamic=Number(getParameterValue(url,"isDynamic")),debugWidget=getParameterValue(url,"debugWidget")}function jvx_raiseEventOnWindow(e){var t;document.createEvent?(t=document.createEvent("HTMLEvents")).initEvent(e,!0,!0):(t=document.createEventObject()).eventType=e,t.eventName=e;var n=document.getElementById("jvx_eventHandler");document.createEvent?n.dispatchEvent(t):n.fireEvent("on"+t.eventType,t)}if(isStandardInline)try{var jvx_iframeBody=document.getElementsByTagName("body")[0],jQuery=function(e){return parent.jQuery(e,jvx_iframeBody)},$jvx=jQuery}catch(e){}function getParameterValue(e,t){if(null==e||""==e)return"";for(var n=e.split("&"),a=n.length,i=null,o="",r=0;r<a;r++)t==(i=n[r].split("="))[0]&&(o=i[1]);return o}var reqData=null,storeEventReq={},jvx_callbacks={},jvxAd={getUnitType:function(){try{return debugWidget&&debuglog("Invoking getUnitType()"),getUnitType()}catch(e){try{return debugWidget&&debuglog("Exception:"+e.toString()+": Invoking getUnitType() on parent"),parent.getUnitType()}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting getUnitType message to parent"),window.parent.postMessage("jvxAPIGetData:getUnitType","*")}}},openClickThrough:function(t){try{debugWidget&&debuglog("Invoking openClickThrough() "+t),openClickThrough(t)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking openClickThrough() on parent "+t),parent.openClickThrough(t)}catch(e){var n="jvxAPI:openClickThrough";void 0!==t&&(n+=":"+encodeURIComponent(t)),debugWidget&&debuglog("Exception:"+e.toString()+": Posting openClickThrough message to parent "+t),window.parent.postMessage(n,"*")}}},loadCmacro:function(){try{debugWidget&&debuglog("Invoking loadCmacro() on parent"),parent.loadCmacro()}catch(e){}},openURL:function(t){try{debugWidget&&debuglog("Invoking openURL() "+t),openURL(t)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking openURL() on parent "+t),parent.openURL(t)}catch(e){var n="jvxAPI:openURL";void 0!==t&&(n+=":"+encodeURIComponent(t)),debugWidget&&debuglog("Exception:"+e.toString()+": Posting openURL message to parent "+t),window.parent.postMessage(n,"*")}}},recordEvent:function(t,n){if(isCampaign)try{debugWidget&&debuglog("Invoking recordEvent() for "+t+" params:"+n),recordEvent(t,n)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking recordEvent() on parent for "+t+" params:"+n),parent.recordEvent(t,n)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting recordEvent message to parent for "+t+" params:"+n),window.parent.postMessage("jvxAPI:recordEvent:"+t+":"+n,"*")}}},trackDCMClick:function(t,n){if(isCampaign)try{debugWidget&&debuglog("Invoking trackDCMClick() for creative Variant:"+n+" params:"+t),trackDCMClick(t,n)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking trackDCMClick() on parent for creative Variant: "+n+" params:"+t),parent.trackDCMClick(t,n)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting trackDCMClick message to parent for creative Variant: "+n+" params:"+t),window.parent.postMessage("jvxAPI:trackDCMClick:"+encodeURIComponent(t)+":"+n,"*")}}},recordCustomEvent:function(e,t,n){isCampaign&&(void 0===t&&(t=!0),t?(debugWidget&&debuglog("Invoking recordEvent() for interactive event for "+e),this.recordEvent(externalStartEventId+parseInt(e))):(debugWidget&&debuglog("Invoking recordEvent() for non-interactive event for "+e),this.recordEvent(externalStartEventId+2e4+parseInt(e))))},showAsset:function(t){try{debugWidget&&debuglog("Invoking showAsset() for "+t),showAsset(t)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking showAsset() on parent for "+t),parent.showAsset(t)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting showAsset message to parent for "+t),window.parent.postMessage("jvxAPI:showAsset:"+t,"*")}}},hideAsset:function(t){try{debugWidget&&debuglog("Invoking hideAsset() for "+t),hideAsset(t)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking hideAsset() on parent for "+t),parent.hideAsset(t)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting hideAsset message to parent for "+t),window.parent.postMessage("jvxAPI:hideAsset:"+t,"*")}}},renderAsset:function(t){try{debugWidget&&debuglog("Invoking renderAsset() for "+t),renderAsset(t)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking renderAsset() on parent for "+t),parent.renderAsset(t)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting renderAsset message to parent for "+t),window.parent.postMessage("jvxAPI:renderAsset:"+t,"*")}}},invokeAsset:function(t,n,a){try{if(void 0===a)a=1;debugWidget&&debuglog("Invoking invokeAsset() for "+t),invokeAsset(t,n,a)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking invokeAsset() on parent for "+t),parent.invokeAsset(t,n,a)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting invokeAsset message to parent for "+t),window.parent.postMessage("jvxAPI:invokeAsset:"+t+":"+n+":"+a,"*")}}},invokeAnim:function(t,n){try{debugWidget&&debuglog("Invoking invokeAnim() for Asset:"+t+" Anim:"+n),invokeAnim(t,n)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking invokeAnim() on parent for Asset:"+t+" Anim:"+n),parent.invokeAnim(t,n)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting invokeAnim message to parent for Asset:"+t+" Anim:"+n),window.parent.postMessage("jvxAPI:invokeAnim:"+t+":"+n,"*")}}},reloadAsset:function(t){try{debugWidget&&debuglog("Invoking reloadAsset() for "+t),reloadAsset(t)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking reloadAsset() on parent for "+t),parent.reloadAsset(t)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting reloadAsset message to parent for "+t),window.parent.postMessage("jvxAPI:reloadAsset:"+t,"*")}}},pauseVideo:function(t){try{debugWidget&&debuglog("Invoking pauseVideo() for "+t),pauseVideo(t,1)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking pauseVideo() on parent for "+t),parent.pauseVideo(t,1)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting pauseVideo message to parent for "+t),window.parent.postMessage("jvxAPI:pauseVideo:"+t,"*")}}},restartVideo:function(t){try{debugWidget&&debuglog("Invoking restartVideo() for "+t),restartVideo(t)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking restartVideo() on parent for "+t),parent.restartVideo(t)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting restartVideo message to parent for "+t),window.parent.postMessage("jvxAPI:restartVideo:"+t,"*")}}},resumeVideo:function(t){try{debugWidget&&debuglog("Invoking resumeVideo() for "+t),resumeVideo(t)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking resumeVideo() on parent for "+t),parent.resumeVideo(t)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting resumeVideo message to parent for "+t),window.parent.postMessage("jvxAPI:resumeVideo:"+t,"*")}}},setVideoVolume:function(t,n){try{debugWidget&&debuglog("Invoking setVideoVolume() for "+t+" volume="+n),setVideoVolume(t,n)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking setVideoVolume() on parent for "+t+" volume="+n),parent.setVideoVolume(t,n)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting setVideoVolume message to parent for "+t+" volume="+n),window.parent.postMessage("jvxAPI:setVideoVolume:"+t+":"+n,"*")}}},showGroups:function(t){try{debugWidget&&debuglog("Invoking showGroups() for "+t),showGroups(t)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking showGroups() on parent for "+t),parent.showGroups(t)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting showGroups message to parent for "+t),window.parent.postMessage("jvxAPI:showGroups:"+t,"*")}}},hideGroups:function(t){try{debugWidget&&debuglog("Invoking hideGroups() for "+t),hideGroups(t)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking hideGroups() on parent for "+t),parent.hideGroups(t)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting hideGroups message to parent for "+t),window.parent.postMessage("jvxAPI:hideGroups:"+t,"*")}}},getStorageData:function(t,n){try{return debugWidget&&debuglog("Invoking getStorageData() for "+t),getStorageData(t)}catch(e){try{return debugWidget&&debuglog("Exception:"+e.toString()+": Invoking getStorageData() on parent for "+t),parent.getStorageData(t)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting getStorageData message to parent for "+t),window.parent.postMessage("jvxAPIGetData:getStorageData:"+t,"*"),void 0!==t&&(storeEventReq.hasOwnProperty(t)&&delete storeEventReq[t],storeEventReq.getStorageData=n)}}},setStorageData:function(t,n){try{debugWidget&&debuglog("Invoking setStorageData() for "+t),setStorageData(t,n)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking setStorageData() on parent for "+t),parent.setStorageData(t,n)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting setStorageData message to parent for "+t),window.parent.postMessage("jvxAPI:setStorageData:"+t+":"+n,"*")}}},isCampaign:function(){var e=!1;try{var t=url.match(/siteId=(.*)&/)[1].split("&")[0]}catch(e){}return(void 0!==isCampaign&&isCampaign||void 0!==t&&null!=t&&""!=t&&t)&&(e=!0),debugWidget&&debuglog("isCampaign = "+e),e},on:function(t,n){try{$("#eventHandler").on(t,n)}catch(e){try{parent.$("#eventHandler").on(t,n)}catch(e){attachEventListener(document.getElementById("jvx_eventHandler"),t,n,!1)}}},raiseEvent:function(t){try{debugWidget&&debuglog("Invoking raiseEvent() for "+t),raiseEvent(t)}catch(e){try{var n=jvx_validate(assetID)?assetID:window.frameElement.id,a=-1==t.indexOf(n+".")?n+"."+t:t;isExtAsInline&&parent.raiseEvent(t),debugWidget&&debuglog("Exception:"+e.toString()+": Invoking raiseEvent() on parent for "+a),parent.raiseEvent(a)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting raiseEvent message to parent for "+t+" and "+a),window.parent.postMessage("jvxAPI:raiseEvent:"+t,"*"),window.parent.postMessage("jvxAPI:raiseEvent:"+a,"*")}}},invokeBaseMethod:function(t,n){try{debugWidget&&debuglog("Invoking invokeBaseMethod() for "+t+" "+n),invokeBaseMethod(t,n)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking invokeBaseMethod() on parent for "+t+" "+n),parent.invokeBaseMethod(t,n)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting invokeBaseMethod to parent for "+t+" "+n),window.parent.postMessage("jvxAPI:invokeBaseMethod:"+t,n,"*")}}},invokeExpMethod:function(t,n){try{debugWidget&&debuglog("Invoking invokeExpMethod() for "+t+" "+n),invokeExpMethod(t,n)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking invokeExpMethod() on parent for "+t+" "+n),parent.invokeExpMethod(t,n)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting invokeExpMethod to parent for "+t+" "+n),window.parent.postMessage("jvxAPI:invokeExpMethod:"+t,n,"*")}}},raiseEventOnBase:function(t){try{debugWidget&&debuglog("Invoking raiseEventOnBase() for "+t),raiseEventOnBase(t)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking raiseEventOnBase() on parent for "+t),parent.raiseEventOnBase(t)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting raiseEventOnBase to parent for "+t),window.parent.postMessage("jvxAPI:raiseEventOnBase:"+t,"*")}}},raiseEventOnExp:function(t){try{debugWidget&&debuglog("Invoking raiseEventOnExp() for "+t),raiseEventOnExp(t)}catch(e){try{debugWidget&&debuglog("Exception:"+e.toString()+": Invoking raiseEventOnExp() on parent for "+t),parent.raiseEventOnExp(t)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting raiseEventOnExp message to parent for "+t),window.parent.postMessage("jvxAPI:raiseEventOnExp:"+t,"*")}}},recordEventByName:function(t,n,a,i){if(isCampaign)try{t=t,a=jvx_validate(a)?a:"",i=jvx_validate(i)?i:"";debugWidget&&debuglog("Invoking recordEventByName() for "+t+":interactive="+n+":asset="+i+":params="+a),recordEventByName(t,n,a,i)}catch(e){try{var o=""!=i?i:jvx_validate(assetID)?assetID:window.frameElement.id;debugWidget&&debuglog("Exception:"+e.toString()+": Invoking recordEventByName() on parent for "+t+":interactive="+n+":asset="+o+":params="+a),parent.recordEventByName(t,n,a,o)}catch(e){var r=encodeURIComponent(t)+":"+n+":"+a+":"+o;debugWidget&&debuglog("Exception:"+e.toString()+": Posting recordEventByName message to parent for "+r),window.parent.postMessage("jvxAPI:recordEventByName:"+r,"*")}}},doAssetVariantReporting:function(t,n){if(isCampaign)try{doAssetVariantReporting(t,n)}catch(e){try{parent.doAssetVariantReporting(t,n)}catch(e){var a=t+":"+n;window.parent.postMessage("jvxAPI:doAssetVariantReporting:"+a,"*")}}},recordAssetVariation:function(t,n,a){if(isCampaign)try{debugWidget&&debuglog("Recording recordAssetVariation() for "+t),recordAssetVariation(t,n,a)}catch(e){try{parent.recordAssetVariation(t,n,a)}catch(e){var i=t+":"+n+":"+a;window.parent.postMessage("jvxAPI:recordAssetVariation:"+i,"*")}}},recordInteractionEvent:function(t,e,n){if(isCampaign){var a=parseInt(e);void 0!==n&&(a+=n?externalStartEventId:2e4+externalStartEventId);try{recordInteractionEvent(assetID,t,a)}catch(e){try{parent.recordInteractionEvent(assetID,t,a)}catch(e){var i=assetID+":"+encodeURIComponent(t)+":"+a;window.parent.postMessage("jvxAPI:recordInteractionEvent:"+i,"*")}}}},raiseAndRecordEvent:function(e,t,n,a){e&&this.raiseEvent(e),this.recordInteractionEvent(t,n,a)},getCreativeSize:function(e){void 0===jvx_callbacks.getCreativeSize&&(jvx_callbacks.getCreativeSize=[]),jvx_callbacks.getCreativeSize.push(void 0!==e?e:""),debugWidget&&debuglog("Posting getCreativeSize message to top"),top.postMessage(objectName+":getCreativeSize","*")},initialDimension:function(e,t){debugWidget&&debuglog("Posting initialDimension message to top: width:"+e+" height:"+t),top.postMessage(objectName+":initialDimension:"+e+":"+t,"*")},resizeCreative:function(e,t,n,a){void 0===jvx_callbacks.resizeComplete&&(jvx_callbacks.resizeComplete=[]),jvx_callbacks.resizeComplete.push(void 0!==a?a:""),debugWidget&&debuglog("Posting resizeCreative message to top: width:"+e+" height:"+t+" effect:"+n),top.postMessage(objectName+":resizeCreative:"+e+":"+t+":"+n,"*")},leaveBehindCreative:function(e,t,n){void 0===jvx_callbacks.leaveBehindComplete&&(jvx_callbacks.leaveBehindComplete=[]),jvx_callbacks.leaveBehindComplete.push(void 0!==n?n:""),debugWidget&&debuglog("Posting leaveBehindCreative message to top: Pos:"+e+" scalePer:"+t),top.postMessage(objectName+":leaveBehindCreative:"+e+":"+t,"*")},retainOriginalCreative:function(e){void 0===jvx_callbacks.retainOriginalComplete&&(jvx_callbacks.retainOriginalComplete=[]),jvx_callbacks.retainOriginalComplete.push(void 0!==e?e:""),debugWidget&&debuglog("Posting retainOriginalCreative message to top"),top.postMessage(objectName+":retainOriginalCreative","*")},getCreativePosition:function(e){void 0===jvx_callbacks.getCreativePosition&&(jvx_callbacks.getCreativePosition=[]),jvx_callbacks.getCreativePosition.push(void 0!==e?e:""),debugWidget&&debuglog("Posting getCreativePosition message to top"),top.postMessage(objectName+":getCreativePosition","*")},setHeightForInOutViewport:function(e){debugWidget&&debuglog("Posting setHeightForInOutViewport message to top: height:"+e),top.postMessage(objectName+":setHeightForInOutViewport:"+e,"*")},getResult:function(e){attachEventListener(window.parent,"message",e,!1)},clientErrorLog:function(e,t){return""!=e&&null!=e&&"undefined"!=e||(""!=t&&jvxErr([{message:t}]),!1)},dynamicDataRequestObj:{},assetDBReq:function(e){this.dynamicDataRequestObj.currentService=void 0;var t=this.clientErrorLog(e,"Invalid database name parameter");if(!isCampaign||!t)return this;var n=this.dynamicDataRequestObj;n.hasOwnProperty("dataBase")||(n.dataBase={});var a=n.dataBase;return e="dbUserDef"==e.split("|")[1]?e:e+"|db",n.currentService=e,a.hasOwnProperty(e)||(a[e]={},a[e].dbName=e),this},keys:function(e){var t=this.clientErrorLog(e,"Invalid keys parameter");if(!isCampaign||!t||void 0===this.dynamicDataRequestObj.currentService)return this;var n=this.dynamicDataRequestObj,a=n.dataBase[n.currentService];a.hasOwnProperty("key")?a.key+=","+String(e):a.key=String(e),a.lastUpdatedkey=String(e);var i=a.key.split(",");return a.key=this.removeDuplicates(i),this},withDataSignal:function(e,t){var n,a,i=dyn__serviceList,o=(e=e.toLowerCase(),[]),r=[];for(var s in i)o.push(s),s.toLowerCase()==e&&(n=s);if(!i.hasOwnProperty(n))return this.clientErrorLog("","Invalid Data Signal - should match with the below Data Signal list - \n["+String(o)+"]"),this;for(var s in t="tagvarservice"==e||"cookiedata"==e?("tagvarservice"==e?"datasignal":"jvxdynsl_group")+t:t,i[n])r.push(s),s.toLowerCase()==t.toLowerCase()&&(a=s);if(!i[n].hasOwnProperty(a))return this.clientErrorLog("","Invalid property of Data Signal("+n+") - should match with the below property list - \n["+String(r)+"]"),this;var g=n+":"+n+"."+a;return g=dynamicData[g],this.keys(g),this},max:function(e){var t=this.clientErrorLog(e,"");if(!isCampaign||!t||void 0===this.dynamicDataRequestObj.currentService)return this;var n=this.dynamicDataRequestObj;return n.dataBase[n.currentService].max=e,this},order:function(e){var t=this.clientErrorLog(e,"");if(!isCampaign||!t||void 0===this.dynamicDataRequestObj.currentService)return this;var n=this.dynamicDataRequestObj;return n.dataBase[n.currentService].order=e,this},orderBy:function(e){var t=this.clientErrorLog(e,"");if(!isCampaign||!t||void 0===this.dynamicDataRequestObj.currentService)return this;var n=this.dynamicDataRequestObj;return n.dataBase[n.currentService].orderBy=e,this},build:function(e){if(!isCampaign||void 0===this.dynamicDataRequestObj.currentService)return this;var t=this.dynamicDataRequestObj,n=t.dataBase;n[t.currentService];return JSON.parse(JSON.stringify(n[t.currentService]))},dynamicDataCallback:function(e){return this.dynamicDataRequestObj.callback=e,this},hasAPICallExceedLimit:function(){return++maxDynAPICallCnt>Number(maxDynAPICall)&&(this.clientErrorLog("","Maximum "+maxDynAPICall+" API calls allowed from getDynamicService per session"),!0)},get:function(){if(!isCampaign)return this;if(this.hasAPICallExceedLimit())return this;var e=this.dynamicDataRequestObj;if(queryObj=this.dynamicDataRequestObj.dataBase,e.queryStr="",argLen=arguments.length,checkdbKey=0<arguments.length?"dbUserDef":"db",0<argLen)for(var t=0;t<argLen;t++)if(void 0!==arguments[t].dbName&&void 0!==arguments[t].lastUpdatedkey)this.assetDBReq(arguments[t].dbName+"UserDef").keys(arguments[t].lastUpdatedkey).max(arguments[t].max).order(arguments[t].order).orderBy(arguments[t].orderBy).build();for(var n in queryObj){var a=n.split("|")[1];a==checkdbKey&&(this.updateQuery(queryObj[n]),"dbUserDef"==a&&delete queryObj[n])}if(""!=e.queryStr){var i=resolveDynDataURL+"?";"undefined"!=typeof playerParamsMap&&playerParamsMap.hasOwnProperty("debugWidget")&&1==playerParamsMap.debugWidget&&(i+="debugWidget=1&"),i+="campaignId="+campaignId+e.queryStr+"&callback="+e.callback+"&r_="+Math.random();var o=document.createElement("script");o.src=i,document.getElementsByTagName("body")[0].appendChild(o)}},removeDuplicates:function(e){return e.filter(function(e,t,n){return n.indexOf(e)==t})},updateQuery:function(e){var t=this.dynamicDataRequestObj,n=e.dbName.split("|")[0],a="";a+="&var="+n+":"+n,a+="&ap_"+n+"="+e.key,e.hasOwnProperty("max")&&(a+="&ap_"+n+":max="+e.max),e.hasOwnProperty("order")&&(a+="&ap_"+n+":order="+e.order),e.hasOwnProperty("orderBy")&&(a+="&ap_"+n+":orderBy="+e.orderBy),t.queryStr+=a},getDynamicService:function(e,t,n){if(isCampaign){if(this.hasAPICallExceedLimit())return this;"string"==typeof e&&(e=e.split(",")),"string"==typeof t&&(t=t.split(","));for(var a="campaignId="+campaignId,i=e.length,o=t.length,r=null,s=resolveDynDataURL+"?",g=0;g<o;g++)a+="&"+(r=t[g].split("="))[0]+"="+r[1];for(g=0;g<i;g++)a+="&var="+e[g];s+=a+="&callback="+n+"&r_="+Math.random();var d=document.createElement("script");d.src=s,document.getElementsByTagName("head")[0].appendChild(d)}},getDynamicData:function(){if(debugWidget){debuglog("Invoking getDynamicData()");try{debuglog("dynamicData : "+dynamicData.stringify())}catch(e){}}return dynamicData},getCreativeVariant:function(){return DYReportingKey},getSelectedCreativeMaster:function(){return DYselectedGroup},getSelectedSegment:function(){return DYselectedRule},isExtWidget:function(){return debugWidget&&debuglog("isExtWidget? "+isExternalWg),isExternalWg},isExtAsInlineWidget:function(){return debugWidget&&debuglog("isExtAsInlineWidget? "+isExtAsInline),isExtAsInline},isInlineWidget:function(){return debugWidget&&debuglog("isInlineWidget? "+isStandardInline),isStandardInline},isDynamic:function(){return debugWidget&&debuglog("isDynamic? "+isDynamic),isDynamic},getAssetEventType:function(t){try{return debugWidget&&debuglog("Invoking getAssetEventType() for "+t),getAssetEventType(t)}catch(e){try{return debugWidget&&debuglog("Exception:"+e.toString()+": Invoking getAssetEventType("+t+") on parent"),parent.getAssetEventType(t)}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting getAssetEventType message to parent"),window.parent.postMessage("jvxAPIGetData:getAssetEventType:"+t,"*")}}},getAssetInteractionDetails:function(e,t){window.parent.postMessage("jvxAssetInteraction:"+encodeURIComponent(JSON.stringify(arguments)),"*");var n=encodeURIComponent(JSON.stringify(arguments));try{return debugWidget&&debuglog("Invoking getAssetInteractionDetails() for "+n),JSON.parse(decodeURIComponent(getAssetInteractionDetails(n)))}catch(e){try{return debugWidget&&debuglog("Exception:"+e.toString()+": Invoking getAssetInteractionDetails() on parent for "+n),JSON.parse(decodeURIComponent(parent.getAssetInteractionDetails(n)))}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting getAssetInteractionDetails message to parent for "+n),window.parent.postMessage("jvxAPIGetData:getAssetInteractionDetails:"+n,"*"),void 0!==n&&(storeEventReq.hasOwnProperty(n)&&delete storeEventReq[n],storeEventReq.getAssetInteractionDetails=t)}}},appendHTML:function(t,n,a){try{if(debugWidget&&debuglog("Invoking appendHTML() for "+t+", Target element:"+a),"self"==t){var e=null==a?assetID:a;(null!=document.getElementById(e)?document.getElementById(e):document.body).innerHTML+=n}else{var i=parent.document.getElementById(t);(null!=i.contentDocument.getElementById(a)?i.contentDocument.getElementById(a):i.contentDocument.body).innerHTML+=n}}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting appendHTML message to parent for "+t+", Target element:"+a),window.parent.postMessage("jvxAPI:appendHTML:"+t+":"+n+":"+a,"*")}},replaceHTML:function(t,n,a){try{if(debugWidget&&debuglog("Invoking replaceHTML() for "+t+", Target element:"+a),"self"==t){var e=null==a?assetID:a;(null!=document.getElementById(e)?document.getElementById(e):document.body).innerHTML=n}else{var i=parent.document.getElementById(t);(null!=i.contentDocument.getElementById(a)?i.contentDocument.getElementById(a):i.contentDocument.body).innerHTML=n}}catch(e){debugWidget&&debuglog("Exception:"+e.toString()+": Posting replaceHTML message to parent for "+t+", Target element:"+a),window.parent.postMessage("jvxAPI:replaceHTML:"+t+":"+n+":"+a,"*")}}};function jvx_validate(e){return!(void 0===e||null==e||""==e||!e)}function debuglog(e){console.log("Jivox Widget API:"+e)}function receiveMsgOnWidgetConfig(e){"function"==typeof invokeAction&&invokeAction(e)}function msgReceived(e,t){storeEventReq.hasOwnProperty(e)?"getAssetInteractionDetails"==e?this[storeEventReq[e]](t):storeEventReq[e]():void 0!==t&&storeEventReq.hasOwnProperty(t)&&storeEventReq[t](e)}function attachEventListener(e,t,n,a){try{void 0!==e.addEventListener?e.addEventListener(t,n,a):e.attachEvent("on"+t,n)}catch(e){}}if("undefined"!=typeof console&&void 0!==console.log||(window.console={log:function(){}}),parentAccess&&!isInLayout)function eventListner(e){try{msgReceived(e)}catch(e){}}else{function listenLayoutPostMsg(e){if("string"==typeof e.data){var t=e.data.split(":",10);if(t&&2<=t.length&&"layoutWidgetListner"==t[0])if("response"==t[1]){reqData=t[2];try{postMsgRecived()}catch(e){}}else if("eventListner"==t[1]){var n=t[2];try{"raiseEvent"==n&&jvx_raiseEventOnWindow(t[3]),msgReceived(n,"getAssetInteractionDetails"==n?JSON.parse(decodeURIComponent(t[3])):t[3])}catch(e){}}else if("invokeB2E"==t[1]){n=t[2];try{window[t[2]](t[3])}catch(e){}}else if("dynamicData"==t[1]){if(dynamicData=JSON.parse(decodeURIComponent(t[2])),jvx_raiseDYEvent(),isDynamic)try{initiate()}catch(e){}}else if("replaceHTML"==t[1])try{jvxAd.replaceHTML("self",t[2],t[3])}catch(e){}else if("appendHTML"==t[1])try{jvxAd.appendHTML("self",t[2],t[3])}catch(e){}}}attachEventListener(window,"message",listenLayoutPostMsg,!1)}function jvx_raiseDYEvent(){try{jvx_raiseEventOnWindow("onDynamicDataLoad"),"undefined"!=typeof onDynamicDataLoad&&onDynamicDataLoad(dynamicData)}catch(e){void 0===console.oldLog?console.log(e):console.oldLog(e)}}function jvxErr(e){var t=e.length;if(0!=t)for(var n=0;n<t;n++)console.log(e[n].message)}isInLayout||attachEventListener(window.parent,"message",function(e){if("string"==typeof e.data){var t=e.data.split(":",10),n="",a="";void 0!==jvx_callbacks[t[1]]?(n=jvx_callbacks[t[1]].shift(),"getCreativeSize"==t[1]&&(a=[t[2],t[3]]),"getCreativePosition"==t[1]&&(a=[t[2],t[3]])):void 0!==jvx_callbacks[t[3]]&&(n=jvx_callbacks[t[3]].shift(),a="resizeComplete"),"function"==typeof n&&n(a)}},!1),isDynamic&&parentAccess&&!isInLayout&&function(){var e=window.parent;DYReportingKey=e&&e.creativeVariant?e.creativeVariant:"",DYselectedGroup=e&&e.DYselectedGroup?e.DYselectedGroup:"",DYselectedRule=e&&e.DYselectedRule?e.DYselectedRule:"",resolveDynDataURL=window.parent&&window.parent.resolveDynDataURL?window.parent.resolveDynDataURL:"",maxDynAPICall=window.parent&&window.parent.maxDynAPICall?window.parent.maxDynAPICall:5,maxDynAPICallCnt=0,dyn__serviceList=window.parent&&window.parent.dyn__serviceList?window.parent.dyn__serviceList:"";var t=window.parent&&window.parent.dynamicJSONData?window.parent.dynamicJSONData:"";t&&t.data&&(dynamicData=t.data)}(),attachEventListener(window,"load",function(){var e;isInLayout||((e=document.createElement("div")).id="jvx_eventHandler",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",document.body.appendChild(e)),(isStandardInline||isExtAsInline)&&isDynamic&&jvx_raiseDYEvent(dynamicData);try{isDynamic&&isExternalWg||isInLayout||"undefined"!=typeof initiate&&initiate()}catch(e){void 0===console.oldLog?console.log(e):console.oldLog(e)}},!1);